_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"8dkK":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n("easm")}])},BJE2:function(e){e.exports=JSON.parse('{"sort":[{"id":"createdAtDesc","value":"createdAt_DESC","text":"\ub4f1\ub85d\uc77c \uc21c"},{"id":"createdAtAsc","value":"createdAt_ASC","text":"\ub4f1\ub85d\uc77c \uc5ed\uc21c"}],"filter":[{"id":"pub_status","value":"PUBLIC","text":"\uacf5\uac1c"},{"id":"pri_status","value":"PRIVATE","text":"\ube44\uacf5\uac1c"}]}')},easm:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),i=n("nOHt"),o=n("VX74"),c=n("MRKs"),u=n("O0wy"),l=n("4siG"),s=n("vct6"),d=n("wx14"),p=n("LYXD"),f=n("vOnD"),h=r.a.createElement,m=f.d.div.withConfig({displayName:"NoData__Container",componentId:"sc-16cm2gk-0"})(["width:100%;text-align:center;"]),g=function(e){var t=e.children;return h(m,null,t)},v=n("Jx5A"),y=n("4e43"),b=r.a.createElement,w=function(e){var t=e.loading,n=e.loadingMorePosts,a=e.posts;return b(r.a.Fragment,null,b(v.a,null,"\ud3ec\uc2a4\ud2b8 \uac80\uc0c9\uacb0\uacfc"),t&&n&&b(y.a,null),a.length>0?a.map((function(e){return b(p.a,Object(d.a)({key:e.id},e))})):b(g,null,"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."))},x=n("GEYq"),_=r.a.createElement,k=function(){var e=Object(i.useRouter)().query.keyword,t=Object(o.useQuery)(x.a,{variables:{searchKeyword:decodeURIComponent(e),first:10},notifyOnNetworkStatusChange:!0}),n=t.data,r=t.loading,c=t.fetchMore,u=t.networkStatus===o.NetworkStatus.fetchMore,l=function(){if(!r){var e=document.documentElement,t=e.scrollHeight,a=e.clientHeight,i=e.scrollTop;n.getPosts&&i+a===t&&n.getPosts.length%10===0&&c({variables:{skip:n.getPosts.length}})}};return Object(a.useEffect)((function(){return window.addEventListener("scroll",l),function(){return window.removeEventListener("scroll",l)}}),[n&&n.getPosts,r]),!n&&r?_(a.Fragment,null):_(w,{loading:r,loadingMorePosts:u,posts:n.getPosts})},C=n("4lbY"),O=n("Okwz"),j=n("ppIK"),S=n("z75s"),E=n("BJE2"),q=r.a.createElement,N=f.d.form.withConfig({displayName:"SearchBar__SearchForm",componentId:"sc-118hiqe-0"})(["position:relative;margin:0 auto;width:100%;"]),I=f.d.div.withConfig({displayName:"SearchBar__Wrapper",componentId:"sc-118hiqe-1"})(["position:relative;display:flex;justify-content:space-between;"]),B=Object(f.d)(C.a).withConfig({displayName:"SearchBar__SearchInput",componentId:"sc-118hiqe-2"})(["background:",";padding:5px;font-size:14px;border-radius:3px;text-align:center;position:relative;&::placeholder{opacity:0.8;font-weight:200;}"],(function(e){return e.theme.bgColor})),F=f.d.div.withConfig({displayName:"SearchBar__IconWrapper",componentId:"sc-118hiqe-3"})(["position:absolute;right:35px;top:5px;"]),P=f.d.div.withConfig({displayName:"SearchBar__FilterWrapper",componentId:"sc-118hiqe-4"})(["",";margin-top:5px;width:100%;height:auto;display:",";flex-direction:column;"],(function(e){return e.theme.whiteBox}),(function(e){return e.activeFilter?"flex":"none"})),A=f.d.div.withConfig({displayName:"SearchBar__FilterColumn",componentId:"sc-118hiqe-5"})(["display:flex;justfiy-content:flex-start;align-items:center;padding:10px;"]),M=f.d.div.withConfig({displayName:"SearchBar__FilterCategory",componentId:"sc-118hiqe-6"})(["font-size:20px;font-weight:500;text-align:center;padding:10px;"]),D=f.d.div.withConfig({displayName:"SearchBar__FilterSelector",componentId:"sc-118hiqe-7"})(["font-size:16px;padding:10px;flex:1;& input{margin-right:5px;}& span{margin-left:10px;}"]),R=function(){var e=Object(i.useRouter)(),t=Object(a.useState)(!1),n=t[0],r=t[1],o=Object(a.useState)("createdAt_DESC"),c=o[0],u=o[1],l=Object(a.useState)([]),s=l[0],d=l[1],p=Object(a.useState)(e.query.keyword||""),f=p[0],h=p[1],m=Object(a.useCallback)((function(){r(!n)}),[n]),g=Object(a.useCallback)((function(e){u(e.target.value)}),[]),v=Object(a.useCallback)((function(e){var t=e.target,n=t.checked,a=t.value;d(n?function(e){return e.concat(a)}:function(e){return e.filter((function(e){return e!==a}))})}),[]),y=Object(a.useCallback)((function(e){h(e.target.value)}),[]),b=Object(a.useCallback)((function(t){t.preventDefault(),r(!1),e.push("/search?keyword=".concat(f,"&sort=").concat(c,"&filter=").concat(s.join(",")))}),[f,c,s]);return q(N,{onSubmit:b},q(j.b,{htmlFor:"search",val:f},"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694."),q(I,null,q(B,{placeholder:"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694.",name:"search",value:f,onChange:y,autoComplete:"off"}),q(F,{onClick:b},q(S.j,null)),q("div",{onClick:m},q(S.d,{style:{width:30,height:30}}))),q(P,{activeFilter:n},q(A,null,q(M,null,"\uc815\ub82c"),q(D,null,E.sort.map((function(e){return q("span",{key:e.id},q("input",{type:"radio",name:"radio",id:e.id,value:e.value,onChange:g}),q("label",{htmlFor:e.id},e.text))})))),q(A,null,q(M,null,"\uc0c1\ud0dc"),q(D,null,E.filter.map((function(e){return q("span",{key:e.id},q("input",{type:"checkbox",name:"checkbox",id:e.id,value:e.value,onChange:v}),q("label",{htmlFor:e.id},e.text))})))),q(A,null,q(O.a,{text:"\uc801\uc6a9",type:"submit"}))))},J=r.a.createElement,T=f.d.div.withConfig({displayName:"SearchTag__Container",componentId:"n6c13p-0"})(["width:100%;margin:0 auto;margin-top:10px;margin-bottom:20px;"]),z=f.d.span.withConfig({displayName:"SearchTag__FilterWrapper",componentId:"n6c13p-1"})(["",";display:inline-block;padding:10px;& + &{margin-left:10px;}"],(function(e){return e.theme.whiteBox})),K=function(e){return Object.keys(e).filter((function(t){return e[t]&&"keyword"!==t})).reduce((function(t,n){"filter"===n?e[n].split(",").forEach((function(e){t.push({query:n,value:e,text:E[n].filter((function(t){return t.value===e}))[0].text})})):t.push({query:n,value:e[n],text:E[n].filter((function(t){return t.value===e[n]}))[0].text});return t}),[])},L=function(){var e=Object(i.useRouter)(),t=Object(a.useState)(K(e.query)),n=t[0],r=t[1],o=Object(a.useCallback)((function(t){var a=n.filter((function(e){return e.text!==t})),r=e.query.keyword,i="",o=a.filter((function(e){return"sort"===e.query}));o.length>0&&(i=o[0].value);var c=a.filter((function(e){return"sort"!==e.query})).map((function(e){return e.value})).join(",");e.push("/search?keyword=".concat(r,"&sort=").concat(i,"&filter=").concat(c))}),[n,e.query]);return Object(a.useEffect)((function(){r(K(e.query))}),[e.query]),J(T,null,n.map((function(e){return J(z,{key:e.value},e.text,J("span",{"aria-hidden":"true",style:{marginLeft:10,cursor:"pointer"},onClick:function(){return o(e.text)}},"\xd7"))})))},W=r.a.createElement;t.default=function(){var e=Object(i.useRouter)(),t=Object(u.i)();return Object(o.useQuery)(c.a,{onCompleted:function(e){var n=e.getMyProfile,a=n.id,r=n.nickname,i=n.email,o=n.avatar,c=n.isMaster;t({type:u.d,userId:a,nickname:r,email:i,avatar:o,isMaster:c})}}),W(l.a,{title:"\uac80\uc0c9"},W(s.a,null,W(R,null),W(L,null),W(v.a,null,'"',e.query.keyword,'"\uc758 \uac80\uc0c9\uacb0\uacfc'),W(k,null)))}}},[["8dkK",1,2,6,0,3,4,5]]]);