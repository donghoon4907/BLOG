{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{\"9Coe\":function(e,t,n){\"use strict\";var r=n(\"ODXe\"),a=n(\"nOHt\"),i=n(\"q1tI\"),o=n.n(i),c=n(\"vOnD\"),u=n(\"4lbY\"),l=n(\"Okwz\"),s=n(\"ppIK\"),d=n(\"z75s\"),p=n(\"BJE2\"),f=o.a.createElement,h=c.d.form.withConfig({displayName:\"SearchBar__SearchForm\",componentId:\"sc-118hiqe-0\"})([\"position:relative;margin:0 auto;width:100%;\"]),m=c.d.div.withConfig({displayName:\"SearchBar__Wrapper\",componentId:\"sc-118hiqe-1\"})([\"position:relative;display:flex;justify-content:space-between;\"]),g=Object(c.d)(u.a).withConfig({displayName:\"SearchBar__SearchInput\",componentId:\"sc-118hiqe-2\"})([\"background:\",\";padding:5px;font-size:14px;border-radius:3px;text-align:center;position:relative;&::placeholder{opacity:0.8;font-weight:200;}\"],(function(e){return e.theme.bgColor})),v=c.d.div.withConfig({displayName:\"SearchBar__IconWrapper\",componentId:\"sc-118hiqe-3\"})([\"position:absolute;right:35px;top:5px;\"]),y=c.d.div.withConfig({displayName:\"SearchBar__FilterWrapper\",componentId:\"sc-118hiqe-4\"})([\"\",\";margin-top:5px;width:100%;height:auto;display:\",\";flex-direction:column;\"],(function(e){return e.theme.whiteBox}),(function(e){return e.activeFilter?\"flex\":\"none\"})),w=c.d.div.withConfig({displayName:\"SearchBar__FilterColumn\",componentId:\"sc-118hiqe-5\"})([\"display:flex;justfiy-content:flex-start;align-items:center;padding:10px;\"]),b=c.d.div.withConfig({displayName:\"SearchBar__FilterCategory\",componentId:\"sc-118hiqe-6\"})([\"font-size:20px;font-weight:500;text-align:center;padding:10px;\"]),x=c.d.div.withConfig({displayName:\"SearchBar__FilterSelector\",componentId:\"sc-118hiqe-7\"})([\"font-size:16px;padding:10px;flex:1;& input{margin-right:5px;}& span{margin-left:10px;}\"]);t.a=function(){var e=Object(a.useRouter)(),t=e.query.keyword,n=Object(r.a)(t,2),o=n[0],c=void 0===o?\"\":o,u=n[1],C=void 0===u?\"\":u,_=Object(i.useState)(!1),k=_[0],O=_[1],j=Object(i.useState)(C),E=j[0],S=j[1],q=Object(i.useState)([]),I=q[0],N=q[1],B=Object(i.useState)(c),P=B[0],F=B[1],A=Object(i.useCallback)((function(){O(!k)}),[k]),D=Object(i.useCallback)((function(e){S(e.target.value)}),[]),M=Object(i.useCallback)((function(e){var t=e.target,n=t.checked,r=t.value;N(n?function(e){return e.concat(r)}:function(e){return e.filter((function(e){return e!==r}))})}),[]),R=Object(i.useCallback)((function(e){F(e.target.value)}),[]),H=Object(i.useCallback)((function(t){if(t.preventDefault(),!P)return alert(\"\\uac80\\uc0c9\\uc5b4\\ub97c \\uc785\\ub825\\ud558\\uc138\\uc694\");O(!1),e.push(\"/search/\".concat(P,\"/\").concat(E))}),[P,E,I]);return f(h,{onSubmit:H},f(s.b,{htmlFor:\"search\",val:P},\"\\uac80\\uc0c9\\uc5b4\\ub97c \\uc785\\ub825\\ud558\\uc138\\uc694.\"),f(m,null,f(g,{placeholder:\"\\uac80\\uc0c9\\uc5b4\\ub97c \\uc785\\ub825\\ud558\\uc138\\uc694.\",name:\"search\",value:P,onChange:R,autoComplete:\"off\"}),f(v,{onClick:H},f(d.j,null)),f(\"div\",{onClick:A},f(d.d,{style:{width:30,height:30}}))),f(y,{activeFilter:k},f(w,null,f(b,null,\"\\uc815\\ub82c\"),f(x,null,p.sort.map((function(e){return f(\"span\",{key:e.id},f(\"input\",{type:\"radio\",name:\"radio\",id:e.id,value:e.value,onChange:D}),f(\"label\",{htmlFor:e.id},e.text))})))),f(w,null,f(b,null,\"\\uc0c1\\ud0dc\"),f(x,null,p.filter.map((function(e){return f(\"span\",{key:e.id},f(\"input\",{type:\"checkbox\",name:\"checkbox\",id:e.id,value:e.value,onChange:M}),f(\"label\",{htmlFor:e.id},e.text))})))),f(w,null,f(l.a,{text:\"\\uc801\\uc6a9\",type:\"submit\"}))))}},BJE2:function(e){e.exports=JSON.parse('{\"sort\":[{\"id\":\"createdAtDesc\",\"value\":\"createdAt_DESC\",\"text\":\"\\ub4f1\\ub85d\\uc77c \\uc21c\"},{\"id\":\"createdAtAsc\",\"value\":\"createdAt_ASC\",\"text\":\"\\ub4f1\\ub85d\\uc77c \\uc5ed\\uc21c\"}],\"filter\":[{\"id\":\"pub_status\",\"value\":\"PUBLIC\",\"text\":\"\\uacf5\\uac1c\"},{\"id\":\"pri_status\",\"value\":\"PRIVATE\",\"text\":\"\\ube44\\uacf5\\uac1c\"}]}')},UcE7:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/search/[...keyword]\",function(){return n(\"nH6w\")}])},nH6w:function(e,t,n){\"use strict\";n.r(t);var r=n(\"o0o1\"),a=n.n(r),i=n(\"ODXe\"),o=n(\"HaE+\"),c=n(\"q1tI\"),u=n.n(c),l=n(\"VX74\"),s=n(\"ZRao\"),d=n(\"MRKs\"),p=n(\"GEYq\"),f=n(\"O0wy\"),h=n(\"4siG\"),m=n(\"vct6\"),g=n(\"nOHt\"),v=n(\"wx14\"),y=n(\"LYXD\"),w=n(\"vOnD\"),b=u.a.createElement,x=w.d.div.withConfig({displayName:\"NoData__Container\",componentId:\"sc-16cm2gk-0\"})([\"width:100%;text-align:center;\"]),C=function(e){var t=e.children;return b(x,null,t)},_=n(\"Jx5A\"),k=n(\"4e43\"),O=u.a.createElement,j=function(e){var t=e.loading,n=e.loadingMorePosts,r=e.posts,a=e.keyword;return O(u.a.Fragment,null,O(_.a,null,'\"',a,'\" \\uac80\\uc0c9\\uacb0\\uacfc'),t&&n&&O(k.a,null),r.length>0?r.map((function(e){return O(y.a,Object(v.a)({key:e.id},e))})):O(C,null,\"\\uac80\\uc0c9 \\uacb0\\uacfc\\uac00 \\uc5c6\\uc2b5\\ub2c8\\ub2e4.\"))},E=u.a.createElement,S=function(){var e=Object(g.useRouter)().query.keyword,t=Object(i.a)(e,2),n=t[0],r=t[1],a=void 0===r?\"createdAt_DESC\":r,o=Object(l.useQuery)(p.a,{variables:{searchKeyword:decodeURIComponent(n),sort:a,first:10},notifyOnNetworkStatusChange:!0}),u=o.data,s=o.loading,d=o.fetchMore,f=o.networkStatus===l.NetworkStatus.fetchMore,h=function(){if(!s){var e=document.documentElement,t=e.scrollHeight,r=e.clientHeight,i=e.scrollTop;u.getPosts&&i+r===t&&u.getPosts.length%10===0&&d({variables:{skip:u.getPosts.length,searchKeyword:decodeURIComponent(n),sort:a}})}};return Object(c.useEffect)((function(){return window.addEventListener(\"scroll\",h),function(){return window.removeEventListener(\"scroll\",h)}}),[u.getPosts,s,n,a]),E(j,{loading:s,loadingMorePosts:f,posts:u.getPosts,keyword:n})},q=n(\"9Coe\"),I=n(\"BJE2\"),N=u.a.createElement,B=w.d.div.withConfig({displayName:\"SearchTag__Container\",componentId:\"n6c13p-0\"})([\"width:100%;margin:0 auto;margin-top:10px;margin-bottom:20px;\"]),P=w.d.span.withConfig({displayName:\"SearchTag__FilterWrapper\",componentId:\"n6c13p-1\"})([\"\",\";display:inline-block;padding:10px;& + &{margin-left:10px;}\"],(function(e){return e.theme.whiteBox})),F=function(e){return Object.keys(e).filter((function(t){return e[t]&&\"keyword\"!==t})).reduce((function(t,n){\"filter\"===n?e[n].split(\",\").forEach((function(e){t.push({query:n,value:e,text:I[n].filter((function(t){return t.value===e}))[0].text})})):t.push({query:n,value:e[n],text:I[n].filter((function(t){return t.value===e[n]}))[0].text});return t}),[])},A=function(){var e=Object(g.useRouter)(),t=Object(c.useState)(F(e.query)),n=t[0],r=t[1],a=Object(c.useCallback)((function(t){var r=n.filter((function(e){return e.text!==t})),a=e.query.keyword,i=\"\",o=r.filter((function(e){return\"sort\"===e.query}));o.length>0&&(i=o[0].value);var c=r.filter((function(e){return\"sort\"!==e.query})).map((function(e){return e.value})).join(\",\");e.push(\"/search?keyword=\".concat(a,\"&sort=\").concat(i,\"&filter=\").concat(c))}),[n,e.query]);return Object(c.useEffect)((function(){r(F(e.query))}),[e.query]),N(B,null,n.map((function(e){return N(P,{key:e.value},e.text,N(\"span\",{\"aria-hidden\":\"true\",style:{marginLeft:10,cursor:\"pointer\"},onClick:function(){return a(e.text)}},\"\\xd7\"))})))},D=u.a.createElement,M=function(){var e=Object(f.i)();return Object(l.useQuery)(d.a,{onCompleted:function(t){var n=t.getMyProfile,r=n.id,a=n.nickname,i=n.email,o=n.avatar,c=n.isMaster;e({type:f.d,userId:r,nickname:a,email:i,avatar:o,isMaster:c})}}),D(h.a,{title:\"\\uac80\\uc0c9\"},D(m.a,null,D(q.a,null),D(A,null),D(S,null)))};M.getInitialProps=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,c,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r=n.keyword,o=Object(i.a)(r,2),c=o[0],u=o[1],l=void 0===u?\"createdAt_DESC\":u,d=Object(s.a)(),e.next=5,d.query({query:p.a,variables:{first:10,searchKeyword:c,orderBy:l}});case 5:return e.abrupt(\"return\",{initialApolloState:d.cache.extract()});case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=M}},[[\"UcE7\",1,2,6,0,3,4,5,7]]]);","extractedComments":[]}