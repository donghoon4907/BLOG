{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{\"/EDR\":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"23aj\")}])},\"23aj\":function(e,t,n){\"use strict\";n.r(t);var a=n(\"o0o1\"),r=n.n(a),i=n(\"HaE+\"),o=n(\"q1tI\"),c=n.n(o),l=n(\"VX74\"),s=n(\"4siG\"),u=n(\"vOnD\"),d=n(\"vct6\"),p=n(\"z75s\"),f=n(\"Jx5A\"),m=n(\"wx14\"),v=n(\"zLVn\"),b=n(\"ZCiN\");var h=function(e,t){var n=Object(o.useRef)(!0);Object(o.useEffect)((function(){if(!n.current)return e();n.current=!1}),t)},y=n(\"Vhrh\"),g=n(\"TSYQ\"),j=n.n(g),O=n(\"YECM\"),w=n(\"dRu9\"),x=n(\"17x9\"),k=n.n(x),C=n(\"JCAc\"),N=n(\"YdCC\"),I=Object(N.a)(\"carousel-caption\"),E=Object(N.a)(\"carousel-item\"),_=n(\"noGa\"),S=n(\"dbZe\"),M=n(\"vUet\"),R=n(\"z+q/\"),P=40,A={bsPrefix:k.a.string,as:k.a.elementType,slide:k.a.bool,fade:k.a.bool,controls:k.a.bool,indicators:k.a.bool,activeIndex:k.a.number,onSelect:k.a.func,onSlide:k.a.func,onSlid:k.a.func,interval:k.a.number,keyboard:k.a.bool,pause:k.a.oneOf([\"hover\",!1]),wrap:k.a.bool,touch:k.a.bool,prevIcon:k.a.node,prevLabel:k.a.string,nextIcon:k.a.node,nextLabel:k.a.string},L={slide:!0,fade:!1,controls:!0,indicators:!0,defaultActiveIndex:0,interval:5e3,keyboard:!0,pause:\"hover\",wrap:!0,touch:!0,prevIcon:c.a.createElement(\"span\",{\"aria-hidden\":\"true\",className:\"carousel-control-prev-icon\"}),prevLabel:\"Previous\",nextIcon:c.a.createElement(\"span\",{\"aria-hidden\":\"true\",className:\"carousel-control-next-icon\"}),nextLabel:\"Next\"};var T=c.a.forwardRef((function(e,t){var n=Object(C.a)(e,{activeIndex:\"onSelect\"}),a=n.as,r=void 0===a?\"div\":a,i=n.bsPrefix,l=n.slide,s=n.fade,u=n.controls,d=n.indicators,p=n.activeIndex,f=n.onSelect,g=n.onSlide,x=n.onSlid,k=n.interval,N=n.keyboard,I=n.onKeyDown,E=n.pause,A=n.onMouseOver,L=n.onMouseOut,T=n.wrap,$=n.touch,U=n.onTouchStart,q=n.onTouchMove,D=n.onTouchEnd,z=n.prevIcon,W=n.prevLabel,B=n.nextIcon,F=n.nextLabel,X=n.className,Q=n.children,K=Object(v.a)(n,[\"as\",\"bsPrefix\",\"slide\",\"fade\",\"controls\",\"indicators\",\"activeIndex\",\"onSelect\",\"onSlide\",\"onSlid\",\"interval\",\"keyboard\",\"onKeyDown\",\"pause\",\"onMouseOver\",\"onMouseOut\",\"wrap\",\"touch\",\"onTouchStart\",\"onTouchMove\",\"onTouchEnd\",\"prevIcon\",\"prevLabel\",\"nextIcon\",\"nextLabel\",\"className\",\"children\"]),V=Object(M.a)(i,\"carousel\"),Y=Object(o.useRef)(null),H=Object(o.useState)(\"next\"),J=H[0],G=H[1],Z=Object(o.useState)(!1),ee=Z[0],te=Z[1],ne=Object(o.useState)(p||0),ae=ne[0],re=ne[1];ee||p===ae||(Y.current?(G(Y.current),Y.current=null):G((p||0)>ae?\"next\":\"prev\"),l&&te(!0),re(p||0));var ie=c.a.Children.toArray(Q).filter(c.a.isValidElement).length,oe=Object(o.useCallback)((function(e){if(!ee){var t=ae-1;if(t<0){if(!T)return;t=ie-1}Y.current=\"prev\",f&&f(t,e)}}),[ee,ae,f,T,ie]),ce=Object(b.a)((function(e){if(!ee){var t=ae+1;if(t>=ie){if(!T)return;t=0}Y.current=\"next\",f&&f(t,e)}})),le=Object(o.useRef)();Object(o.useImperativeHandle)(t,(function(){return{element:le.current,prev:oe,next:ce}}));var se=Object(b.a)((function(){!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;var t=getComputedStyle(e);return\"none\"!==t.display&&\"hidden\"!==t.visibility&&\"none\"!==getComputedStyle(e.parentNode).display}(le.current)&&ce()})),ue=\"next\"===J?\"left\":\"right\";h((function(){l||(g&&g(ae,ue),x&&x(ae,ue))}),[ae]);var de=V+\"-item-\"+J,pe=V+\"-item-\"+ue,fe=Object(o.useCallback)((function(e){Object(R.a)(e),g&&g(ae,ue)}),[g,ae,ue]),me=Object(o.useCallback)((function(){te(!1),x&&x(ae,ue)}),[x,ae,ue]),ve=Object(o.useCallback)((function(e){if(N&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case\"ArrowLeft\":return e.preventDefault(),void oe(e);case\"ArrowRight\":return e.preventDefault(),void ce(e)}I&&I(e)}),[N,I,oe,ce]),be=Object(o.useState)(!1),he=be[0],ye=be[1],ge=Object(o.useCallback)((function(e){\"hover\"===E&&ye(!0),A&&A(e)}),[E,A]),je=Object(o.useCallback)((function(e){ye(!1),L&&L(e)}),[L]),Oe=Object(o.useRef)(0),we=Object(o.useRef)(0),xe=Object(o.useState)(!1),ke=xe[0],Ce=xe[1],Ne=Object(y.a)(),Ie=Object(o.useCallback)((function(e){Oe.current=e.touches[0].clientX,we.current=0,$&&Ce(!0),U&&U(e)}),[$,U]),Ee=Object(o.useCallback)((function(e){e.touches&&e.touches.length>1?we.current=0:we.current=e.touches[0].clientX-Oe.current,q&&q(e)}),[q]),_e=Object(o.useCallback)((function(e){if($){var t=we.current;if(Math.abs(t)<=P)return;t>0?oe(e):ce(e)}Ne.set((function(){Ce(!1)}),k||void 0),D&&D(e)}),[$,oe,ce,Ne,k,D]),Se=null!=k&&!he&&!ke&&!ee,Me=Object(o.useRef)();Object(o.useEffect)((function(){if(Se)return Me.current=window.setInterval(document.visibilityState?se:ce,k||void 0),function(){null!==Me.current&&clearInterval(Me.current)}}),[Se,ce,k,se]);var Re=Object(o.useMemo)((function(){return d&&Array.from({length:ie},(function(e,t){return function(e){f&&f(t,e)}}))}),[d,ie,f]);return(c.a.createElement(r,Object(m.a)({ref:le},K,{onKeyDown:ve,onMouseOver:ge,onMouseOut:je,onTouchStart:Ie,onTouchMove:Ee,onTouchEnd:_e,className:j()(X,V,l&&\"slide\",s&&V+\"-fade\")}),d&&c.a.createElement(\"ol\",{className:V+\"-indicators\"},Object(_.a)(Q,(function(e,t){return c.a.createElement(\"li\",{key:t,className:t===ae?\"active\":void 0,onClick:Re?Re[t]:void 0})}))),c.a.createElement(\"div\",{className:V+\"-inner\"},Object(_.a)(Q,(function(e,t){var n=t===ae;return l?c.a.createElement(w.c,{in:n,onEnter:n?fe:void 0,onEntered:n?me:void 0,addEndListener:O.a},(function(t){return c.a.cloneElement(e,{className:j()(e.props.className,n&&\"entered\"!==t&&de,(\"entered\"===t||\"exiting\"===t)&&\"active\",(\"entering\"===t||\"exiting\"===t)&&pe)})})):c.a.cloneElement(e,{className:j()(e.props.className,n&&\"active\")})}))),u&&c.a.createElement(c.a.Fragment,null,(T||0!==p)&&c.a.createElement(S.a,{className:V+\"-control-prev\",onClick:oe},z,W&&c.a.createElement(\"span\",{className:\"sr-only\"},W)),(T||p!==ie-1)&&c.a.createElement(S.a,{className:V+\"-control-next\",onClick:ce},B,F&&c.a.createElement(\"span\",{className:\"sr-only\"},F)))))}));T.displayName=\"Carousel\",T.propTypes=A,T.defaultProps=L,T.Caption=I,T.Item=E;var $=T,U=n(\"h4VS\");function q(){var e=Object(U.a)([\"\\n  query getNotices($skip: Int, $first: Int, $orderBy: String) {\\n    getNotices(skip: $skip, first: $first, orderBy: $orderBy) {\\n      id\\n      title\\n      description\\n      createdAt\\n      updatedAt\\n    }\\n  }\\n\"]);return q=function(){return e},e}var D=Object(l.gql)(q()),z=c.a.createElement,W=Object(u.d)($).withConfig({displayName:\"Carousel__Container\",componentId:\"sc-13ptfzp-0\"})([\"width:100%;height:100%;& .carousel-control-next,.carousel-control-prev{width:5%;}& .carousel-inner,.carousel-item{width:100%;height:100%;}\"]),B=(u.d.div.withConfig({displayName:\"Carousel__CarouselColumn\",componentId:\"sc-13ptfzp-1\"})([\"display:flex;width:100%;height:100%;align-items:center;padding:0 50px;box-sizing:border-box;overflow:hidden;\"]),u.d.div.withConfig({displayName:\"Carousel__CarouselItem\",componentId:\"sc-13ptfzp-2\"})([\"flex:1 padding:10px;& + &{margin-left:10px;}\"]),function(e){var t=e.children;return z(W,{indicators:!1,nextIcon:z(p.h,null),prevIcon:z(p.h,{style:{transform:\"rotate(180deg)\"}})},t)}),F=n(\"qXo3\"),X=n(\"O0wy\"),Q=c.a.createElement,K=u.d.div.withConfig({displayName:\"NoticeList__NoticeWrapper\",componentId:\"ztp66g-0\"})([\"height:50px;display:flex;flex-direction:column;justify-content:center;margin-right:15%;margin-left:15%;padding:5px;text-align:center;cursor:pointer;\"]),V=Object(o.memo)((function(){var e=Object(X.i)(),t=Object(X.j)().isMaster,n=Object(l.useQuery)(D,{variables:{first:10}}).data,a=Object(o.useCallback)((function(n,a,r){e({type:X.f,action:t?\"modifiable\":\"readonly\",actionText:\"\",title:n,description:a,noticeId:r})}),[t]);return Q(B,null,n.getNotices.map((function(e){var t=e.id,n=e.title,r=e.description,i=e.updatedAt;return Q($.Item,{key:t},Q(K,{onClick:function(){return a(n,r,t)}},Q(\"div\",null,n),Q(F.a,{text:i})))})))})),Y=n(\"GEYq\"),H=n(\"LYXD\"),J=n(\"4e43\"),G=c.a.createElement,Z=Object(o.memo)((function(){var e=Object(l.useQuery)(Y.a,{variables:{first:10},notifyOnNetworkStatusChange:!0}),t=e.data,n=e.loading,a=e.fetchMore,r=e.networkStatus===l.NetworkStatus.fetchMore,i=function(){if(!n){var e=document.documentElement,r=e.scrollHeight,i=e.clientHeight,o=e.scrollTop;t.getPosts&&o+i===r&&t.getPosts.length%10===0&&a({variables:{skip:t.getPosts.length}})}};return Object(o.useEffect)((function(){return window.addEventListener(\"scroll\",i),function(){return window.removeEventListener(\"scroll\",i)}}),[t.getPosts,n]),G(c.a.Fragment,null,n&&r&&G(J.a,null),t.getPosts.map((function(e){return G(H.a,Object(m.a)({key:e.id},e))})))})),ee=n(\"2207\"),te=n(\"5Mjc\"),ne=n(\"K49Q\"),ae=n(\"WIWL\"),re=c.a.createElement,ie=u.d.div.withConfig({displayName:\"RecommandUserItem__Container\",componentId:\"sc-1p039a4-0\"})([\"height:70px;display:flex;justify-content:space-between;align-items:center;position:relative;padding:10px 0;\"]),oe=u.d.div.withConfig({displayName:\"RecommandUserItem__AvatarWrapper\",componentId:\"sc-1p039a4-1\"})([\"width:50px;\"]),ce=u.d.div.withConfig({displayName:\"RecommandUserItem__NicknameWrapper\",componentId:\"sc-1p039a4-2\"})([\"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:150px;\"]),le=u.d.div.withConfig({displayName:\"RecommandUserItem__FollowWrapper\",componentId:\"sc-1p039a4-3\"})([\"width:80px;\"]),se=function(e){var t=e.id,n=e.avatar,a=e.nickname,r=e.followedBy,i=Object(X.j)().userId,c=r.some((function(e){return e.id===i})),l=Object(o.useState)(!1),s=l[0],u=l[1],d=Object(o.useCallback)((function(){u(!s)}),[s]);return re(ie,{key:t},re(oe,null,re(ae.a,{size:\"45\",src:n.url,onClick:d})),re(ce,null,a),re(le,null,t!==i&&re(ne.a,{isFollowing:c,userId:t})),s&&re(te.a,{userId:t}))},ue=c.a.createElement,de=u.d.div.withConfig({displayName:\"RecommandUserList__Container\",componentId:\"to77jb-0\"})([\"display:flex;flex-direction:column;\"]),pe=Object(o.memo)((function(){var e=Object(l.useQuery)(ee.a).data;return ue(de,null,e.getRecommandUsers.map((function(e){return ue(se,Object(m.a)({key:e.id},e))})))})),fe=c.a.createElement,me=u.d.div.withConfig({displayName:\"FeedPresenter__PostWrapper\",componentId:\"sc-15sy3a5-0\"})([\"width:600px;\",\"{width:100%;}\"],(function(e){return e.theme.media.tablet})),ve=u.d.div.withConfig({displayName:\"FeedPresenter__UserWrapper\",componentId:\"sc-15sy3a5-1\"})([\"width:300px;display:flex;flex-direction:column;justfiy-content:space-between;margin-left:20px;& > aside{flex:1;}\",\"{display:none;}\"],(function(e){return e.theme.media.tablet})),be=u.d.div.withConfig({displayName:\"FeedPresenter__StickyWrap\",componentId:\"sc-15sy3a5-2\"})([\"position:sticky;top:80px;\"]),he=function(e){var t=e.isMaster,n=e.onAddNotice,a=e.recommandUserEl;return fe(d.a,{flexDirection:\"row\"},fe(me,null,fe(f.a,null,\"\\ucd5c\\uc2e0 \\ud3ec\\uc2a4\\ud2b8\"),fe(Z,null)),fe(ve,{ref:a},fe(\"aside\",null,fe(be,null,fe(\"div\",null,fe(f.a,{activeBorder:!0},fe(\"span\",null,\"\\uacf5\\uc9c0\\uc0ac\\ud56d\"),fe(\"div\",null,t&&fe(\"div\",{onClick:n},fe(p.a,null)))),fe(V,null)),fe(\"div\",null,fe(f.a,{activeBorder:!0},\"\\ucd94\\ucc9c\\uc778\"),fe(pe,null))))))},ye=c.a.createElement,ge=function(){var e=Object(X.j)().isMaster,t=Object(X.i)(),n=Object(o.useRef)(null),a=Object(o.useCallback)((function(){t({type:X.f,action:\"add\",actionText:\"\\ub4f1\\ub85d\",title:\"\",description:\"\",noticeId:\"\"})}),[]);return ye(he,{isMaster:e,onAddNotice:a,recommandUserEl:n})},je=n(\"ZRao\");function Oe(){var e=Object(U.a)([\"\\n  query feed($skip: Int, $first: Int) {\\n    getPosts(skip: $skip, first: $first) {\\n      id\\n      title\\n      description\\n      createdAt\\n      user {\\n        id\\n        nickname\\n        avatar {\\n          url\\n        }\\n      }\\n      video {\\n        url\\n      }\\n      likes {\\n        user {\\n          id\\n        }\\n      }\\n      status\\n      room {\\n        id\\n      }\\n    }\\n    getNotices(skip: $skip, first: $first) {\\n      id\\n      title\\n      description\\n      createdAt\\n      updatedAt\\n    }\\n    getRecommandUsers {\\n      id\\n      nickname\\n      email\\n      avatar {\\n        url\\n      }\\n      isMaster\\n      followedBy {\\n        id\\n      }\\n      following {\\n        id\\n      }\\n      posts {\\n        id\\n      }\\n    }\\n  }\\n\"]);return Oe=function(){return e},e}var we=Object(l.gql)(Oe()),xe=n(\"MRKs\"),ke=c.a.createElement,Ce=function(){var e=Object(X.i)();return Object(l.useQuery)(xe.a,{ssr:!1,onCompleted:function(t){var n=t.getMyProfile,a=n.id,r=n.nickname,i=n.email,o=n.avatar,c=n.isMaster;e({type:X.d,userId:a,nickname:r,email:i,avatar:o,isMaster:c})}}),ke(s.a,null,ke(ge,null))};Ce.getInitialProps=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(je.a)(),e.next=3,t.query({query:we,variables:{first:10}});case 3:return e.abrupt(\"return\",{initialApolloState:t.cache.extract()});case 4:case\"end\":return e.stop()}}),e)})));t.default=Ce}},[[\"/EDR\",1,2,7,0,3,4,5,6]]]);","extractedComments":[]}