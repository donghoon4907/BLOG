{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  color: \", \";\\n  cursor: pointer;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  min-height: 100vh;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport Router from \"next/router\";\nimport React, { useState, useCallback } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport styled from \"styled-components\";\nimport { useInput } from \"../hooks\";\nimport { logInMutation } from \"../graphql/auth/mutation/login\";\nimport Layout from \"../components/common/Layout\";\nimport { FormWrapper, InputWrapper, Label, StateChanger } from \"../components/common/Form\";\nimport Loader from \"../components/common/Loader\";\nimport Input from \"../components/common/Input\";\nimport Button from \"../components/common/Button\";\nvar Container = styled.div(_templateObject());\n_c = Container;\nvar Wrapper = styled.div(_templateObject2());\n_c2 = Wrapper;\nvar Link = styled.span(_templateObject3(), function (props) {\n  return props.theme.blueColor;\n});\n_c3 = Link;\n\nvar Login = function Login() {\n  _s();\n\n  var _useMutation = useMutation(logInMutation),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      login = _useMutation2[0],\n      loading = _useMutation2[1].loading;\n\n  var _useState = useState(\"login\"),\n      action = _useState[0],\n      setAction = _useState[1];\n\n  var email = useInput(\"\");\n  var pwd = useInput(\"\");\n  var handleSubmit = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var _JSON$parse, message;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!loading) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              _context.prev = 3;\n              _context.next = 6;\n              return login({\n                variables: {\n                  email: email.value,\n                  pwd: pwd.value\n                },\n                update: function update(_, _ref2) {\n                  var data = _ref2.data;\n\n                  if (!data || !data.logIn) {\n                    return;\n                  }\n\n                  localStorage.setItem(\"token\", data.logIn);\n                  Router.push(\"/\");\n                }\n              });\n\n            case 6:\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](3);\n              _JSON$parse = JSON.parse(_context.t0.message), message = _JSON$parse.message;\n              alert(message);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 8]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [email.value, pwd.value, loading]);\n  return __jsx(Layout, {\n    title: \"\\uB85C\\uADF8\\uC778\"\n  }, __jsx(Container, null, __jsx(Wrapper, null, loading && __jsx(Loader, null), __jsx(FormWrapper, null, __jsx(\"form\", {\n    onSubmit: handleSubmit\n  }, __jsx(InputWrapper, null, __jsx(Label, {\n    htmlFor: \"email\",\n    val: email.value\n  }, \"\\uC774\\uBA54\\uC77C\"), __jsx(Input, _extends({\n    type: \"email\",\n    placeholder: \"\\uC774\\uBA54\\uC77C\",\n    name: \"email\"\n  }, email))), __jsx(InputWrapper, null, __jsx(Label, {\n    htmlFor: \"password\",\n    val: pwd.value\n  }, \"\\uC554\\uD638\"), __jsx(Input, _extends({\n    type: \"password\",\n    placeholder: \"\\uC554\\uD638\",\n    name: \"password\"\n  }, pwd))), __jsx(Button, {\n    text: \"로그인\"\n  }))), __jsx(StateChanger, null, action === \"login\" && __jsx(\"div\", null, \"\\uACC4\\uC815\\uC774 \\uC5C6\\uB2E4\\uBA74\\xA0\", __jsx(Link, {\n    onClick: function onClick() {\n      return setAction(\"signup\");\n    }\n  }, \"\\uD68C\\uC6D0\\uAC00\\uC785\")), action === \"signup\" && __jsx(\"div\", null, \"\\uACC4\\uC815\\uC774 \\uC788\\uB2E4\\uBA74\\xA0\", __jsx(Link, {\n    onClick: function onClick() {\n      return setAction(\"login\");\n    }\n  }, \"\\uB85C\\uADF8\\uC778\"))))));\n};\n\n_s(Login, \"79zxvnW1IBr35boxGu1NX/7tAmc=\", false, function () {\n  return [useMutation, useInput, useInput];\n});\n\n_c4 = Login;\nexport default Login;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"Link\");\n$RefreshReg$(_c4, \"Login\");","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/pages/login.tsx"],"names":["Router","React","useState","useCallback","useMutation","styled","useInput","logInMutation","Layout","FormWrapper","InputWrapper","Label","StateChanger","Loader","Input","Button","Container","div","Wrapper","Link","span","props","theme","blueColor","Login","login","loading","action","setAction","email","pwd","handleSubmit","e","preventDefault","variables","value","update","_","data","logIn","localStorage","setItem","push","JSON","parse","message","alert"],"mappings":"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","sourcesContent":["import { NextPage } from \"next\";\nimport Router from \"next/router\";\nimport React, { useState, useCallback, FormEvent } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport styled from \"styled-components\";\nimport { useInput } from \"../hooks\";\nimport { logInMutation } from \"../graphql/auth/mutation/login\";\nimport Layout from \"../components/common/Layout\";\nimport {\n  FormWrapper,\n  InputWrapper,\n  Label,\n  StateChanger\n} from \"../components/common/Form\";\nimport Loader from \"../components/common/Loader\";\nimport Input from \"../components/common/Input\";\nimport Button from \"../components/common/Button\";\n\nconst Container = styled.div`\n  position: relative;\n  min-height: 100vh;\n`;\n\nconst Wrapper = styled.div`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Link = styled.span`\n  color: ${props => props.theme.blueColor};\n  cursor: pointer;\n`;\n\nconst Login: NextPage = () => {\n  const [login, { loading }] = useMutation(logInMutation);\n  const [action, setAction] = useState(\"login\");\n  const email = useInput(\"\");\n  const pwd = useInput(\"\");\n\n  const handleSubmit = useCallback(\n    async (e: FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      if (loading) return;\n      try {\n        await login({\n          variables: { email: email.value, pwd: pwd.value },\n          update: (_, { data }) => {\n            if (!data || !data.logIn) {\n              return;\n            }\n            localStorage.setItem(\"token\", data.logIn);\n            Router.push(\"/\");\n          }\n        });\n      } catch (error) {\n        const { message } = JSON.parse(error.message);\n        alert(message);\n      }\n    },\n    [email.value, pwd.value, loading]\n  );\n  return (\n    <Layout title=\"로그인\">\n      <Container>\n        <Wrapper>\n          {loading && <Loader />}\n          <FormWrapper>\n            <form onSubmit={handleSubmit}>\n              <InputWrapper>\n                <Label htmlFor=\"email\" val={email.value}>\n                  이메일\n                </Label>\n                <Input\n                  type=\"email\"\n                  placeholder=\"이메일\"\n                  name=\"email\"\n                  {...email}\n                />\n              </InputWrapper>\n              <InputWrapper>\n                <Label htmlFor=\"password\" val={pwd.value}>\n                  암호\n                </Label>\n                <Input\n                  type=\"password\"\n                  placeholder=\"암호\"\n                  name=\"password\"\n                  {...pwd}\n                />\n              </InputWrapper>\n              <Button text={\"로그인\"} />\n            </form>\n          </FormWrapper>\n          <StateChanger>\n            {action === \"login\" && (\n              <div>\n                계정이 없다면&nbsp;\n                <Link onClick={() => setAction(\"signup\")}>회원가입</Link>\n              </div>\n            )}\n            {action === \"signup\" && (\n              <div>\n                계정이 있다면&nbsp;\n                <Link onClick={() => setAction(\"login\")}>로그인</Link>\n              </div>\n            )}\n          </StateChanger>\n        </Wrapper>\n      </Container>\n    </Layout>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}