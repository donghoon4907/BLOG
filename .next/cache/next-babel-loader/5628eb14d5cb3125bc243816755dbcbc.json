{"ast":null,"code":"var __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\nconst Container = styled.div.withConfig({\n  displayName: \"SearchTag__Container\",\n  componentId: \"n6c13p-0\"\n})([\"width:100%;margin:0 auto;margin-top:10px;margin-bottom:20px;\"]);\nconst FilterWrapper = styled.span.withConfig({\n  displayName: \"SearchTag__FilterWrapper\",\n  componentId: \"n6c13p-1\"\n})([\"\", \";display:inline-block;padding:10px;& + &{margin-left:10px;}\"], props => props.theme.whiteBox);\n\nconst setTag = obj => Object.keys(obj).filter(v => obj[v] && v !== \"keyword\").reduce((acc, v) => {\n  if (v === \"filter\") {\n    const splitFilter = obj[v].split(\",\");\n    splitFilter.forEach(v2 => {\n      acc.push({\n        query: v,\n        value: v2,\n        text: searchOptions[v].filter(v3 => v3.value === v2)[0].text\n      });\n    });\n  } else {\n    acc.push({\n      query: v,\n      value: obj[v],\n      text: searchOptions[v].filter(v2 => v2.value === obj[v])[0].text\n    });\n  }\n\n  return acc;\n}, []);\n\nconst SearchTag = () => {\n  const router = useRouter();\n  const {\n    0: filters,\n    1: setFilters\n  } = useState(setTag(router.query));\n  const handleRemove = useCallback(text => {\n    const nextFilters = filters.filter(v => v.text !== text);\n    const keyword = router.query.keyword;\n    let sort = \"\";\n    const findSort = nextFilters.filter(v => v.query === \"sort\");\n\n    if (findSort.length > 0) {\n      sort = findSort[0].value;\n    }\n\n    const filter = nextFilters.filter(v => v.query !== \"sort\").map(v => v.value).join(\",\");\n    router.push(`/search?keyword=${keyword}&sort=${sort}&filter=${filter}`);\n  }, [filters, router.query]);\n  useEffect(() => {\n    setFilters(setTag(router.query));\n  }, [router.query]);\n  return __jsx(Container, null, filters.map(v => __jsx(FilterWrapper, {\n    key: v.value\n  }, v.text, __jsx(\"span\", {\n    \"aria-hidden\": \"true\",\n    style: {\n      marginLeft: 10,\n      cursor: \"pointer\"\n    },\n    onClick: () => handleRemove(v.text)\n  }, \"\\xD7\"))));\n};\n\nexport default SearchTag;","map":null,"metadata":{},"sourceType":"module"}