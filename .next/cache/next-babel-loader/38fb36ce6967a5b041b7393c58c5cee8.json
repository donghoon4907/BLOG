{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useCallback, useState, useEffect } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { addNoticeMutation } from \"../../graphql/notice/mutation/add\";\nimport { updateNoticeMutation } from \"../../graphql/notice/mutation/update\";\nimport { removeNoticeMutation } from \"../../graphql/notice/mutation/remove\";\nimport SetNoticePresenter from \"./SetNoticePresenter\";\nimport { useInput, useLazyAxios } from \"../../hooks\";\nimport { useVssDispatch, SET_NOTICE_MODAL } from \"../../context\";\nexport default _s(function (props) {\n  _s();\n\n  var dispatch = useVssDispatch();\n\n  var _useLazyAxios = useLazyAxios(),\n      loading = _useLazyAxios.loading,\n      call = _useLazyAxios.call;\n\n  var title = useInput(props.title);\n  var description = useInput(props.description);\n\n  var _useState = useState(\"\"),\n      mdDescription = _useState[0],\n      setMdDescription = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      preview = _useState2[0],\n      setPreview = _useState2[1];\n\n  var _useState3 = useState({\n    code: props.action,\n    modalTitle: props.actionText\n  }),\n      action = _useState3[0],\n      setAction = _useState3[1]; // readonly, modifiable, modify, add\n\n\n  var _useMutation = useMutation(addNoticeMutation),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      add = _useMutation2[0],\n      addNoticeLoading = _useMutation2[1].loading;\n\n  var _useMutation3 = useMutation(updateNoticeMutation),\n      _useMutation4 = _slicedToArray(_useMutation3, 2),\n      update = _useMutation4[0],\n      updateNoticeLoading = _useMutation4[1].loading;\n\n  var _useMutation5 = useMutation(removeNoticeMutation),\n      _useMutation6 = _slicedToArray(_useMutation5, 2),\n      remove = _useMutation6[0],\n      removeNoticeLoading = _useMutation6[1].loading;\n\n  var convertTextIntoMd = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(text) {\n      var _yield$call, data, error, doc;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (text) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", alert(\"내용을 입력하세요.\"));\n\n            case 2:\n              _context.next = 4;\n              return call({\n                method: \"post\",\n                url: process.env.MDAPI_PATH,\n                data: {\n                  text: text,\n                  mode: \"gfm\",\n                  context: \"github/gollum\"\n                }\n              });\n\n            case 4:\n              _yield$call = _context.sent;\n              data = _yield$call.data;\n              error = _yield$call.error;\n\n              if (!data) {\n                _context.next = 12;\n                break;\n              }\n\n              doc = new DOMParser().parseFromString(data, \"text/html\");\n              return _context.abrupt(\"return\", doc.body.innerHTML);\n\n            case 12:\n              if (!error) {\n                _context.next = 14;\n                break;\n              }\n\n              return _context.abrupt(\"return\", null);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function convertTextIntoMd(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handlePreView = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var md;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!loading) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            _context2.next = 4;\n            return convertTextIntoMd(description.value);\n\n          case 4:\n            md = _context2.sent;\n\n            if (md) {\n              setPreview(md);\n            } else {\n              alert(\"미리보기 로드에 실패했습니다.\");\n            }\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), [description.value]);\n  var handleRefreshPreview = useCallback(function () {\n    setPreview(\"\");\n  }, []);\n  var handleClose = useCallback(function () {\n    dispatch({\n      type: SET_NOTICE_MODAL,\n      isShowNoticeModal: false\n    });\n  }, []);\n  var handleShowEdit = useCallback(function () {\n    setAction({\n      code: \"modify\",\n      modalTitle: \"수정\"\n    });\n  }, []);\n  var handleDelete = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var _yield$remove, deleteNotice;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!removeNoticeLoading) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", alert(\"요청 중입니다.\"));\n\n          case 2:\n            _context3.next = 4;\n            return remove({\n              variables: {\n                noticeId: props.noticeId\n              }\n            });\n\n          case 4:\n            _yield$remove = _context3.sent;\n            deleteNotice = _yield$remove.data.deleteNotice;\n\n            if (deleteNotice) {\n              alert(\"공지사항이 삭제되었습니다.\");\n              window.location.reload();\n            }\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  })), [removeNoticeLoading]);\n  var handleSubmit = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    var _yield$add, addNotice, _yield$update, updateNotice;\n\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (title.value) {\n              _context4.next = 2;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", alert(\"제목을 입력하세요.\"));\n\n          case 2:\n            if (description.value) {\n              _context4.next = 4;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", alert(\"내용을 입력하세요.\"));\n\n          case 4:\n            if (!(action.code === \"add\")) {\n              _context4.next = 14;\n              break;\n            }\n\n            if (!addNoticeLoading) {\n              _context4.next = 7;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", alert(\"요청 중입니다.\"));\n\n          case 7:\n            _context4.next = 9;\n            return add({\n              variables: {\n                title: title.value,\n                description: description.value\n              }\n            });\n\n          case 9:\n            _yield$add = _context4.sent;\n            addNotice = _yield$add.data.addNotice;\n\n            if (addNotice) {\n              alert(\"공지사항이 등록되었습니다.\");\n              window.location.reload();\n            }\n\n            _context4.next = 22;\n            break;\n\n          case 14:\n            if (!(action.code === \"modify\")) {\n              _context4.next = 22;\n              break;\n            }\n\n            if (!updateNoticeLoading) {\n              _context4.next = 17;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", alert(\"요청 중입니다.\"));\n\n          case 17:\n            _context4.next = 19;\n            return update({\n              variables: {\n                title: title.value,\n                description: description.value,\n                noticeId: props.noticeId\n              }\n            });\n\n          case 19:\n            _yield$update = _context4.sent;\n            updateNotice = _yield$update.data.updateNotice;\n\n            if (updateNotice) {\n              alert(\"공지사항이 수정되었습니다.\");\n              window.location.reload();\n            }\n\n          case 22:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  })), [action.code, title.value, description.value, addNoticeLoading, updateNoticeLoading]);\n  useEffect(function () {\n    function update(_x2) {\n      return _update.apply(this, arguments);\n    }\n\n    function _update() {\n      _update = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(value) {\n        var md;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return convertTextIntoMd(value);\n\n              case 2:\n                md = _context5.sent;\n\n                if (md) {\n                  setMdDescription(md);\n                }\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n      return _update.apply(this, arguments);\n    }\n\n    if (props.description) {\n      update(props.description);\n    }\n  }, []);\n  return __jsx(SetNoticePresenter, {\n    action: action,\n    isMaster: props.isMaster,\n    title: title,\n    description: description,\n    mdDescription: mdDescription,\n    preview: preview,\n    onShowEdit: handleShowEdit,\n    onPreview: handlePreView,\n    onRefreshPreview: handleRefreshPreview,\n    onClose: handleClose,\n    onDelete: handleDelete,\n    onSubmit: handleSubmit\n  });\n}, \"2eiQoh11dF+kbE228yTyQ/VJOn4=\", false, function () {\n  return [useVssDispatch, useLazyAxios, useInput, useInput, useMutation, useMutation, useMutation];\n});","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/components/modal/SetNoticeContainer.tsx"],"names":["React","useCallback","useState","useEffect","useMutation","addNoticeMutation","updateNoticeMutation","removeNoticeMutation","SetNoticePresenter","useInput","useLazyAxios","useVssDispatch","SET_NOTICE_MODAL","props","dispatch","loading","call","title","description","mdDescription","setMdDescription","preview","setPreview","code","action","modalTitle","actionText","setAction","add","addNoticeLoading","update","updateNoticeLoading","remove","removeNoticeLoading","convertTextIntoMd","text","alert","method","url","process","env","MDAPI_PATH","data","mode","context","error","doc","DOMParser","parseFromString","body","innerHTML","handlePreView","value","md","handleRefreshPreview","handleClose","type","isShowNoticeModal","handleShowEdit","handleDelete","variables","noticeId","deleteNotice","window","location","reload","handleSubmit","addNotice","updateNotice","isMaster"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { addNoticeMutation } from \"../../graphql/notice/mutation/add\";\nimport { updateNoticeMutation } from \"../../graphql/notice/mutation/update\";\nimport { removeNoticeMutation } from \"../../graphql/notice/mutation/remove\";\nimport SetNoticePresenter from \"./SetNoticePresenter\";\nimport { useInput, useLazyAxios } from \"../../hooks\";\nimport { useVssDispatch, SET_NOTICE_MODAL } from \"../../context\";\n\nexport default props => {\n  const dispatch = useVssDispatch();\n  const { loading, call } = useLazyAxios();\n  const title = useInput(props.title);\n  const description = useInput(props.description);\n  const [mdDescription, setMdDescription] = useState(\"\");\n  const [preview, setPreview] = useState(\"\");\n  const [action, setAction] = useState({\n    code: props.action,\n    modalTitle: props.actionText\n  }); // readonly, modifiable, modify, add\n\n  const [add, { loading: addNoticeLoading }] = useMutation(addNoticeMutation);\n\n  const [update, { loading: updateNoticeLoading }] = useMutation(\n    updateNoticeMutation\n  );\n\n  const [remove, { loading: removeNoticeLoading }] = useMutation(\n    removeNoticeMutation\n  );\n\n  const convertTextIntoMd = async text => {\n    if (!text) return alert(\"내용을 입력하세요.\");\n\n    const { data, error } = await call({\n      method: \"post\",\n      url: process.env.MDAPI_PATH,\n      data: {\n        text,\n        mode: \"gfm\",\n        context: \"github/gollum\"\n      }\n    });\n    if (data) {\n      const doc = new DOMParser().parseFromString(data, \"text/html\");\n      return doc.body.innerHTML;\n    } else if (error) {\n      return null;\n    }\n  };\n\n  const handlePreView = useCallback(async () => {\n    if (loading) return;\n    const md = await convertTextIntoMd(description.value);\n\n    if (md) {\n      setPreview(md);\n    } else {\n      alert(\"미리보기 로드에 실패했습니다.\");\n    }\n  }, [description.value]);\n\n  const handleRefreshPreview = useCallback(() => {\n    setPreview(\"\");\n  }, []);\n\n  const handleClose = useCallback(() => {\n    dispatch({\n      type: SET_NOTICE_MODAL,\n      isShowNoticeModal: false\n    });\n  }, []);\n\n  const handleShowEdit = useCallback(() => {\n    setAction({\n      code: \"modify\",\n      modalTitle: \"수정\"\n    });\n  }, []);\n\n  const handleDelete = useCallback(async () => {\n    if (removeNoticeLoading) return alert(\"요청 중입니다.\");\n\n    const {\n      data: { deleteNotice }\n    } = await remove({\n      variables: {\n        noticeId: props.noticeId\n      }\n    });\n    if (deleteNotice) {\n      alert(\"공지사항이 삭제되었습니다.\");\n      window.location.reload();\n    }\n  }, [removeNoticeLoading]);\n\n  const handleSubmit = useCallback(async () => {\n    if (!title.value) {\n      return alert(\"제목을 입력하세요.\");\n    }\n\n    if (!description.value) {\n      return alert(\"내용을 입력하세요.\");\n    }\n\n    if (action.code === \"add\") {\n      if (addNoticeLoading) return alert(\"요청 중입니다.\");\n\n      const {\n        data: { addNotice }\n      } = await add({\n        variables: {\n          title: title.value,\n          description: description.value\n        }\n      });\n      if (addNotice) {\n        alert(\"공지사항이 등록되었습니다.\");\n        window.location.reload();\n      }\n    } else if (action.code === \"modify\") {\n      if (updateNoticeLoading) return alert(\"요청 중입니다.\");\n\n      const {\n        data: { updateNotice }\n      } = await update({\n        variables: {\n          title: title.value,\n          description: description.value,\n          noticeId: props.noticeId\n        }\n      });\n      if (updateNotice) {\n        alert(\"공지사항이 수정되었습니다.\");\n        window.location.reload();\n      }\n    }\n  }, [\n    action.code,\n    title.value,\n    description.value,\n    addNoticeLoading,\n    updateNoticeLoading\n  ]);\n\n  useEffect(() => {\n    async function update(value) {\n      const md = await convertTextIntoMd(value);\n      if (md) {\n        setMdDescription(md);\n      }\n    }\n    if (props.description) {\n      update(props.description);\n    }\n  }, []);\n\n  return (\n    <SetNoticePresenter\n      action={action}\n      isMaster={props.isMaster}\n      title={title}\n      description={description}\n      mdDescription={mdDescription}\n      preview={preview}\n      onShowEdit={handleShowEdit}\n      onPreview={handlePreView}\n      onRefreshPreview={handleRefreshPreview}\n      onClose={handleClose}\n      onDelete={handleDelete}\n      onSubmit={handleSubmit}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}