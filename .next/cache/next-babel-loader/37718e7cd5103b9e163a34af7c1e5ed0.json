{"ast":null,"code":"var __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\nvar Container = styled.div.withConfig({\n  displayName: \"SearchTag__Container\",\n  componentId: \"n6c13p-0\"\n})([\"width:100%;margin:0 auto;margin-top:10px;margin-bottom:20px;\"]);\nvar FilterWrapper = styled.span.withConfig({\n  displayName: \"SearchTag__FilterWrapper\",\n  componentId: \"n6c13p-1\"\n})([\"\", \";display:inline-block;padding:10px;& + &{margin-left:10px;}\"], function (props) {\n  return props.theme.whiteBox;\n});\nvar sortAndFilter = searchOptions.sort.concat(searchOptions.filter);\n\nvar setTag = function setTag(keyword) {\n  return keyword.map(function (v) {\n    var splitQuery = v.split(\"=\");\n    return {\n      query: splitQuery[0],\n      value: splitQuery[1],\n      text: splitQuery[0] !== \"searchKeyword\" ? sortAndFilter.filter(function (v2) {\n        return v2.value === splitQuery[1];\n      })[0].text : \"\"\n    };\n  });\n};\n\nvar SearchTag = function SearchTag() {\n  var router = useRouter();\n\n  var _useState = useState(router.query.keyword && setTag(router.query.keyword)),\n      filters = _useState[0],\n      setFilters = _useState[1];\n\n  var handleRemove = useCallback(function (text) {\n    var nextFilters = filters.filter(function (v) {\n      return v.text !== text;\n    });\n    setFilters(nextFilters);\n    var keyword = nextFilters.find(function (v) {\n      return v.query === \"searchKeyword\";\n    });\n    var sort = nextFilters.find(function (v) {\n      return v.query === \"orderBy\";\n    });\n    var filter = nextFilters.filter(function (v) {\n      return v.query === \"filter\";\n    });\n    var url = \"/search/searchKeyword=\".concat(keyword.value);\n\n    if (sort) {\n      url += \"/orderBy=\".concat(sort.value);\n    }\n\n    filter.forEach(function (v) {\n      url += \"/filter=\".concat(v.value);\n    });\n    router.push(url);\n  }, [filters, router.query]);\n  useEffect(function () {\n    setFilters(router.query.keyword && setTag(router.query.keyword));\n  }, [router.query.keyword]);\n  return __jsx(Container, null, filters.filter(function (v) {\n    return v.text;\n  }).map(function (v) {\n    return __jsx(FilterWrapper, {\n      key: v.value\n    }, v.text, __jsx(\"span\", {\n      \"aria-hidden\": \"true\",\n      style: {\n        marginLeft: 10,\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        return handleRemove(v.text);\n      }\n    }, \"\\xD7\"));\n  }));\n};\n\nexport default SearchTag;","map":null,"metadata":{},"sourceType":"module"}