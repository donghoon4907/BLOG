{"ast":null,"code":"var __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\nvar Container = styled.div.withConfig({\n  displayName: \"SearchTag__Container\",\n  componentId: \"n6c13p-0\"\n})([\"width:100%;margin:0 auto;margin-top:10px;margin-bottom:20px;\"]);\nvar FilterWrapper = styled.span.withConfig({\n  displayName: \"SearchTag__FilterWrapper\",\n  componentId: \"n6c13p-1\"\n})([\"\", \";display:inline-block;padding:10px;& + &{margin-left:10px;}\"], function (props) {\n  return props.theme.whiteBox;\n});\n\nvar setTag = function setTag(obj) {\n  return Object.keys(obj).filter(function (v) {\n    return obj[v] && v !== \"keyword\";\n  }).reduce(function (acc, v) {\n    if (v === \"filter\") {\n      var splitFilter = obj[v].split(\",\");\n      splitFilter.forEach(function (v2) {\n        acc.push({\n          query: v,\n          value: v2,\n          text: searchOptions[v].filter(function (v3) {\n            return v3.value === v2;\n          })[0].text\n        });\n      });\n    } else {\n      acc.push({\n        query: v,\n        value: obj[v],\n        text: searchOptions[v].filter(function (v2) {\n          return v2.value === obj[v];\n        })[0].text\n      });\n    }\n\n    return acc;\n  }, []);\n};\n\nvar SearchTag = function SearchTag() {\n  var router = useRouter();\n\n  var _useState = useState(setTag(router.query)),\n      filters = _useState[0],\n      setFilters = _useState[1];\n\n  var handleRemove = useCallback(function (text) {\n    var nextFilters = filters.filter(function (v) {\n      return v.text !== text;\n    });\n    var keyword = router.query.keyword;\n    var sort = \"\";\n    var findSort = nextFilters.filter(function (v) {\n      return v.query === \"sort\";\n    });\n\n    if (findSort.length > 0) {\n      sort = findSort[0].value;\n    }\n\n    var filter = nextFilters.filter(function (v) {\n      return v.query !== \"sort\";\n    }).map(function (v) {\n      return v.value;\n    }).join(\",\");\n    router.push(\"/search?keyword=\".concat(keyword, \"&sort=\").concat(sort, \"&filter=\").concat(filter));\n  }, [filters, router.query]);\n  useEffect(function () {\n    setFilters(setTag(router.query));\n  }, [router.query]);\n  return __jsx(Container, null, filters.map(function (v) {\n    return __jsx(FilterWrapper, {\n      key: v.value\n    }, v.text, __jsx(\"span\", {\n      \"aria-hidden\": \"true\",\n      style: {\n        marginLeft: 10,\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        return handleRemove(v.text);\n      }\n    }, \"\\xD7\"));\n  }));\n};\n\nexport default SearchTag;","map":null,"metadata":{},"sourceType":"module"}