{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/idonghun/Desktop/vss/frontend/components/search/SearchTag.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\nvar Container = styled.div.withConfig({\n  displayName: \"SearchTag__Container\",\n  componentId: \"n6c13p-0\"\n})([\"width:100%;margin:0 auto;margin-top:10px;margin-bottom:20px;\"]);\n_c = Container;\nvar FilterWrapper = styled.span.withConfig({\n  displayName: \"SearchTag__FilterWrapper\",\n  componentId: \"n6c13p-1\"\n})([\"\", \";display:inline-block;padding:10px;& + &{margin-left:10px;}\"], function (props) {\n  return props.theme.whiteBox;\n});\n_c2 = FilterWrapper;\nvar sortAndFilter = searchOptions.sort.concat(searchOptions.filter);\n\nvar setTag = function setTag(keyword) {\n  return keyword.map(function (v, idx) {\n    var query;\n\n    if (idx === 0) {\n      query = \"keyword\";\n    } else if (idx === 1) {\n      query = \"sort\";\n    } else {\n      query = \"filter\";\n    }\n\n    return {\n      query: query,\n      value: v,\n      text: query !== \"keyword\" ? sortAndFilter.filter(function (v2) {\n        return v2.value === v;\n      })[0].text : \"\"\n    };\n  });\n};\n\nvar SearchTag = function SearchTag() {\n  _s();\n\n  var router = useRouter();\n\n  var _useState = useState(setTag(router.query.keyword)),\n      filters = _useState[0],\n      setFilters = _useState[1];\n\n  var handleRemove = useCallback(function (text) {\n    var nextFilters = filters.filter(function (v) {\n      return v.text === text;\n    });\n    setFilters(nextFilters);\n    var keyword = filters.find(function (v) {\n      return v.query === \"keyword\";\n    });\n    var sort = filters.find(function (v) {\n      return v.query === \"sort\";\n    });\n    var filter = filters.filter(function (v) {\n      return v.query === \"filter\";\n    });\n    var url = \"/search/\".concat(keyword.value);\n\n    if (sort) {\n      url = \"\".concat(url, \"/\").concat(sort.value);\n    }\n\n    if (filter) {\n      url = \"\".concat(url, \"/\").concat(filter.map(function (v) {\n        return v.value;\n      }).join(\"/\"));\n    }\n\n    router.push(url);\n  }, [filters, router.query]);\n  useEffect(function () {\n    setFilters(setTag(router.query.keyword));\n  }, [router.query.keyword]);\n  return __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, filters.filter(function (v) {\n    return v.text;\n  }).map(function (v) {\n    return __jsx(FilterWrapper, {\n      key: v.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, v.text, __jsx(\"span\", {\n      \"aria-hidden\": \"true\",\n      style: {\n        marginLeft: 10,\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        return handleRemove(v.text);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, \"\\xD7\"));\n  }));\n};\n\n_s(SearchTag, \"H/W70xZC0+Lg/7RBXOKofzH0f28=\", false, function () {\n  return [useRouter];\n});\n\n_c3 = SearchTag;\nexport default SearchTag;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"FilterWrapper\");\n$RefreshReg$(_c3, \"SearchTag\");","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/components/search/SearchTag.tsx"],"names":["useRouter","React","useState","useCallback","useEffect","styled","searchOptions","Container","div","FilterWrapper","span","props","theme","whiteBox","sortAndFilter","sort","concat","filter","setTag","keyword","map","v","idx","query","value","text","v2","SearchTag","router","filters","setFilters","handleRemove","nextFilters","find","url","join","push","marginLeft","cursor"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\n\nconst Container = styled.div`\n  width: 100%;\n  margin: 0 auto;\n  margin-top: 10px;\n  margin-bottom: 20px;\n`;\n\nconst FilterWrapper = styled.span`\n  ${props => props.theme.whiteBox};\n  display: inline-block;\n  padding: 10px;\n\n  & + & {\n    margin-left: 10px;\n  }\n`;\n\nconst sortAndFilter = searchOptions.sort.concat(searchOptions.filter);\n\nconst setTag = (keyword: any) =>\n  keyword.map((v, idx) => {\n    let query;\n    if (idx === 0) {\n      query = \"keyword\";\n    } else if (idx === 1) {\n      query = \"sort\";\n    } else {\n      query = \"filter\";\n    }\n    return {\n      query,\n      value: v,\n      text:\n        query !== \"keyword\"\n          ? sortAndFilter.filter(v2 => v2.value === v)[0].text\n          : \"\"\n    };\n  });\n\nconst SearchTag = () => {\n  const router = useRouter();\n  const [filters, setFilters] = useState<any>(setTag(router.query.keyword));\n\n  const handleRemove = useCallback(\n    text => {\n      const nextFilters = filters.filter(v => v.text === text);\n      setFilters(nextFilters);\n      const keyword = filters.find(v => v.query === \"keyword\");\n      const sort = filters.find(v => v.query === \"sort\");\n      const filter = filters.filter(v => v.query === \"filter\");\n\n      let url = `/search/${keyword.value}`;\n      if (sort) {\n        url = `${url}/${sort.value}`;\n      }\n      if (filter) {\n        url = `${url}/${filter.map(v => v.value).join(\"/\")}`;\n      }\n\n      router.push(url);\n    },\n    [filters, router.query]\n  );\n\n  useEffect(() => {\n    setFilters(setTag(router.query.keyword));\n  }, [router.query.keyword]);\n\n  return (\n    <Container>\n      {filters\n        .filter(v => v.text)\n        .map(v => (\n          <FilterWrapper key={v.value}>\n            {v.text}\n            <span\n              aria-hidden=\"true\"\n              style={{ marginLeft: 10, cursor: \"pointer\" }}\n              onClick={() => handleRemove(v.text)}\n            >\n              Ã—\n            </span>\n          </FilterWrapper>\n        ))}\n    </Container>\n  );\n};\n\nexport default SearchTag;\n"]},"metadata":{},"sourceType":"module"}