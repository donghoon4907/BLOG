{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport Router from \"next/router\";\nimport React, { useCallback } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { useInput } from \"../../hooks\";\nimport { logInMutation } from \"../../graphql/auth/mutation/login\";\nimport SignInPresenter from \"./SignInPresenter\";\nimport { setAccessToken } from \"../../lib/token\";\n\nvar SignInContainer = function SignInContainer() {\n  _s();\n\n  var _useMutation = useMutation(logInMutation),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      login = _useMutation2[0],\n      loading = _useMutation2[1].loading;\n\n  var email = useInput(\"\");\n  var pwd = useInput(\"\");\n  var handleSubmit = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var _JSON$parse, message;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!loading) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              _context.prev = 3;\n              _context.next = 6;\n              return login({\n                variables: {\n                  email: email.value,\n                  pwd: pwd.value\n                },\n                update: function update(_, _ref2) {\n                  var data = _ref2.data;\n\n                  if (data && data.logIn) {\n                    setAccessToken(data.logIn);\n                    Router.push(\"/\");\n                  }\n                }\n              });\n\n            case 6:\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](3);\n              _JSON$parse = JSON.parse(_context.t0.message), message = _JSON$parse.message;\n              alert(message);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 8]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [email.value, pwd.value, loading]);\n  return __jsx(SignInPresenter, {\n    loading: loading,\n    email: email,\n    pwd: pwd,\n    onSubmit: handleSubmit\n  });\n};\n\n_s(SignInContainer, \"vLRLkco0LCCQQkkKm4cicHWjS7Q=\", false, function () {\n  return [useMutation, useInput, useInput];\n});\n\n_c = SignInContainer;\nexport default SignInContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignInContainer\");","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/components/auth/SignInContainer.tsx"],"names":["Router","React","useCallback","useMutation","useInput","logInMutation","SignInPresenter","setAccessToken","SignInContainer","login","loading","email","pwd","handleSubmit","e","preventDefault","variables","value","update","_","data","logIn","push","JSON","parse","message","alert"],"mappings":";;;;;;;AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,IAAgBC,WAAhB,QAAkD,OAAlD;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,aAAT,QAA8B,mCAA9B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,cAAT,QAA+B,iBAA/B;;AAEA,IAAMC,eAAmB,GAAG,SAAtBA,eAAsB,GAAM;AAAA;;AAAA,qBACHL,WAAW,CAACE,aAAD,CADR;AAAA;AAAA,MACzBI,KADyB;AAAA,MAChBC,OADgB,oBAChBA,OADgB;;AAEhC,MAAMC,KAAK,GAAGP,QAAQ,CAAC,EAAD,CAAtB;AACA,MAAMQ,GAAG,GAAGR,QAAQ,CAAC,EAAD,CAApB;AAEA,MAAMS,YAAY,GAAGX,WAAW;AAAA,wEAC9B,iBAAOY,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACEA,cAAAA,CAAC,CAACC,cAAF;;AADF,mBAEML,OAFN;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,qBAIUD,KAAK,CAAC;AACVO,gBAAAA,SAAS,EAAE;AAAEL,kBAAAA,KAAK,EAAEA,KAAK,CAACM,KAAf;AAAsBL,kBAAAA,GAAG,EAAEA,GAAG,CAACK;AAA/B,iBADD;AAEVC,gBAAAA,MAAM,EAAE,gBAACC,CAAD,SAAiB;AAAA,sBAAXC,IAAW,SAAXA,IAAW;;AACvB,sBAAIA,IAAI,IAAIA,IAAI,CAACC,KAAjB,EAAwB;AACtBd,oBAAAA,cAAc,CAACa,IAAI,CAACC,KAAN,CAAd;AACArB,oBAAAA,MAAM,CAACsB,IAAP,CAAY,GAAZ;AACD;AACF;AAPS,eAAD,CAJf;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,4BAcwBC,IAAI,CAACC,KAAL,CAAW,YAAMC,OAAjB,CAdxB,EAcYA,OAdZ,eAcYA,OAdZ;AAeIC,cAAAA,KAAK,CAACD,OAAD,CAAL;;AAfJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAD8B;;AAAA;AAAA;AAAA;AAAA,OAmB9B,CAACd,KAAK,CAACM,KAAP,EAAcL,GAAG,CAACK,KAAlB,EAAyBP,OAAzB,CAnB8B,CAAhC;AAsBA,SACE,MAAC,eAAD;AACE,IAAA,OAAO,EAAEA,OADX;AAEE,IAAA,KAAK,EAAEC,KAFT;AAGE,IAAA,GAAG,EAAEC,GAHP;AAIE,IAAA,QAAQ,EAAEC;AAJZ,IADF;AAQD,CAnCD;;GAAML,e;UACyBL,W,EACfC,Q,EACFA,Q;;;KAHRI,e;AAqCN,eAAeA,eAAf","sourcesContent":["import Router from \"next/router\";\nimport React, { useCallback, FormEvent, FC } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { useInput } from \"../../hooks\";\nimport { logInMutation } from \"../../graphql/auth/mutation/login\";\nimport SignInPresenter from \"./SignInPresenter\";\nimport { setAccessToken } from \"../../lib/token\";\n\nconst SignInContainer: FC = () => {\n  const [login, { loading }] = useMutation(logInMutation);\n  const email = useInput(\"\");\n  const pwd = useInput(\"\");\n\n  const handleSubmit = useCallback(\n    async (e: FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      if (loading) return;\n      try {\n        await login({\n          variables: { email: email.value, pwd: pwd.value },\n          update: (_, { data }) => {\n            if (data && data.logIn) {\n              setAccessToken(data.logIn);\n              Router.push(\"/\");\n            }\n          }\n        });\n      } catch (error) {\n        const { message } = JSON.parse(error.message);\n        alert(message);\n      }\n    },\n    [email.value, pwd.value, loading]\n  );\n\n  return (\n    <SignInPresenter\n      loading={loading}\n      email={email}\n      pwd={pwd}\n      onSubmit={handleSubmit}\n    />\n  );\n};\n\nexport default SignInContainer;\n"]},"metadata":{},"sourceType":"module"}