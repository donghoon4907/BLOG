{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport Router from \"next/router\";\nimport React, { useState, useCallback } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport styled from \"styled-components\";\nimport { useInput } from \"../hooks\";\nimport { logInMutation } from \"../graphql/auth/mutation/login\";\nimport Layout from \"../components/common/Layout\";\nimport { FormWrapper, InputWrapper, Label, StateChanger } from \"../components/common/Form\";\nimport Loader from \"../components/common/Loader\";\nimport Input from \"../components/common/Input\";\nimport Button from \"../components/common/Button\";\nconst Container = styled.div`\n  position: relative;\n  min-height: 100vh;\n`;\nconst Wrapper = styled.div`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n`;\nconst Link = styled.span`\n  color: ${props => props.theme.blueColor};\n  cursor: pointer;\n`;\n\nconst Login = () => {\n  const [login, {\n    loading\n  }] = useMutation(logInMutation);\n  const {\n    0: action,\n    1: setAction\n  } = useState(\"login\");\n  const email = useInput(\"\");\n  const pwd = useInput(\"\");\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n    if (loading) return;\n\n    try {\n      await login({\n        variables: {\n          email: email.value,\n          pwd: pwd.value\n        },\n        update: (_, {\n          data\n        }) => {\n          if (!data || !data.logIn) {\n            return;\n          }\n\n          localStorage.setItem(\"token\", data.logIn);\n          Router.push(\"/\");\n        }\n      });\n    } catch (error) {\n      const {\n        message\n      } = JSON.parse(error.message);\n      alert(message);\n    }\n  }, [email.value, pwd.value, loading]);\n  return __jsx(Layout, {\n    title: \"\\uB85C\\uADF8\\uC778\"\n  }, __jsx(Container, null, __jsx(Wrapper, null, loading && __jsx(Loader, null), __jsx(FormWrapper, null, __jsx(\"form\", {\n    onSubmit: handleSubmit\n  }, __jsx(InputWrapper, null, __jsx(Label, {\n    htmlFor: \"email\",\n    val: email.value\n  }, \"\\uC774\\uBA54\\uC77C\"), __jsx(Input, _extends({\n    type: \"email\",\n    placeholder: \"\\uC774\\uBA54\\uC77C\",\n    name: \"email\"\n  }, email))), __jsx(InputWrapper, null, __jsx(Label, {\n    htmlFor: \"password\",\n    val: pwd.value\n  }, \"\\uC554\\uD638\"), __jsx(Input, _extends({\n    type: \"password\",\n    placeholder: \"\\uC554\\uD638\",\n    name: \"password\"\n  }, pwd))), __jsx(Button, {\n    text: \"로그인\"\n  }))), __jsx(StateChanger, null, action === \"login\" && __jsx(\"div\", null, \"\\uACC4\\uC815\\uC774 \\uC5C6\\uB2E4\\uBA74\\xA0\", __jsx(Link, {\n    onClick: () => setAction(\"signup\")\n  }, \"\\uD68C\\uC6D0\\uAC00\\uC785\")), action === \"signup\" && __jsx(\"div\", null, \"\\uACC4\\uC815\\uC774 \\uC788\\uB2E4\\uBA74\\xA0\", __jsx(Link, {\n    onClick: () => setAction(\"login\")\n  }, \"\\uB85C\\uADF8\\uC778\"))))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/pages/login.tsx"],"names":["Router","React","useState","useCallback","useMutation","styled","useInput","logInMutation","Layout","FormWrapper","InputWrapper","Label","StateChanger","Loader","Input","Button","Container","div","Wrapper","Link","span","props","theme","blueColor","Login","login","loading","action","setAction","email","pwd","handleSubmit","e","preventDefault","variables","value","update","_","data","logIn","localStorage","setItem","push","error","message","JSON","parse","alert"],"mappings":"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","sourcesContent":["import Router from \"next/router\";\nimport React, { useState, useCallback, FormEvent, FC } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport styled from \"styled-components\";\nimport { useInput } from \"../hooks\";\nimport { logInMutation } from \"../graphql/auth/mutation/login\";\nimport Layout from \"../components/common/Layout\";\nimport {\n  FormWrapper,\n  InputWrapper,\n  Label,\n  StateChanger\n} from \"../components/common/Form\";\nimport Loader from \"../components/common/Loader\";\nimport Input from \"../components/common/Input\";\nimport Button from \"../components/common/Button\";\n\nconst Container = styled.div`\n  position: relative;\n  min-height: 100vh;\n`;\n\nconst Wrapper = styled.div`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Link = styled.span`\n  color: ${props => props.theme.blueColor};\n  cursor: pointer;\n`;\n\nconst Login: FC = () => {\n  const [login, { loading }] = useMutation(logInMutation);\n  const [action, setAction] = useState(\"login\");\n  const email = useInput(\"\");\n  const pwd = useInput(\"\");\n\n  const handleSubmit = useCallback(\n    async (e: FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      if (loading) return;\n      try {\n        await login({\n          variables: { email: email.value, pwd: pwd.value },\n          update: (_, { data }) => {\n            if (!data || !data.logIn) {\n              return;\n            }\n            localStorage.setItem(\"token\", data.logIn);\n            Router.push(\"/\");\n          }\n        });\n      } catch (error) {\n        const { message } = JSON.parse(error.message);\n        alert(message);\n      }\n    },\n    [email.value, pwd.value, loading]\n  );\n  return (\n    <Layout title=\"로그인\">\n      <Container>\n        <Wrapper>\n          {loading && <Loader />}\n          <FormWrapper>\n            <form onSubmit={handleSubmit}>\n              <InputWrapper>\n                <Label htmlFor=\"email\" val={email.value}>\n                  이메일\n                </Label>\n                <Input\n                  type=\"email\"\n                  placeholder=\"이메일\"\n                  name=\"email\"\n                  {...email}\n                />\n              </InputWrapper>\n              <InputWrapper>\n                <Label htmlFor=\"password\" val={pwd.value}>\n                  암호\n                </Label>\n                <Input\n                  type=\"password\"\n                  placeholder=\"암호\"\n                  name=\"password\"\n                  {...pwd}\n                />\n              </InputWrapper>\n              <Button text={\"로그인\"} />\n            </form>\n          </FormWrapper>\n          <StateChanger>\n            {action === \"login\" && (\n              <div>\n                계정이 없다면&nbsp;\n                <Link onClick={() => setAction(\"signup\")}>회원가입</Link>\n              </div>\n            )}\n            {action === \"signup\" && (\n              <div>\n                계정이 있다면&nbsp;\n                <Link onClick={() => setAction(\"login\")}>로그인</Link>\n              </div>\n            )}\n          </StateChanger>\n        </Wrapper>\n      </Container>\n    </Layout>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}