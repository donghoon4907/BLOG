{"ast":null,"code":"var _jsxFileName = \"/Users/idonghun/Desktop/vss/frontend/components/search/SearchTag.tsx\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\nconst Container = styled.div.withConfig({\n  displayName: \"SearchTag__Container\",\n  componentId: \"n6c13p-0\"\n})([\"width:100%;margin:0 auto;margin-top:10px;margin-bottom:20px;\"]);\nconst FilterWrapper = styled.span.withConfig({\n  displayName: \"SearchTag__FilterWrapper\",\n  componentId: \"n6c13p-1\"\n})([\"\", \";display:inline-block;padding:10px;& + &{margin-left:10px;}\"], props => props.theme.whiteBox);\nconst sortAndFilter = searchOptions.sort.concat(searchOptions.filter);\n\nconst setTag = keyword => keyword.map(v => {\n  const splitQuery = v.split(\"=\");\n  return {\n    query: splitQuery[0],\n    value: splitQuery[1],\n    text: splitQuery[0] !== \"searchKeyword\" ? sortAndFilter.filter(v2 => v2.value === splitQuery[1])[0].text : \"\"\n  };\n});\n\nconst SearchTag = () => {\n  const router = useRouter();\n  const {\n    0: filters,\n    1: setFilters\n  } = useState(setTag(router.query.keyword));\n  const handleRemove = useCallback(text => {\n    const nextFilters = filters.filter(v => v.text !== text);\n    setFilters(nextFilters);\n    const keyword = nextFilters.find(v => v.query === \"searchKeyword\");\n    const sort = nextFilters.find(v => v.query === \"orderBy\");\n    const filter = nextFilters.filter(v => v.query === \"filter\");\n    let url = `/search/searchKeyword=${keyword.value}`;\n\n    if (sort) {\n      url += `/orderBy=${sort.value}`;\n    }\n\n    filter.forEach(v => {\n      url += `/filter=${v.value}`;\n    });\n    router.push(url);\n  }, [filters, router.query]);\n  useEffect(() => {\n    setFilters(setTag(router.query.keyword));\n  }, [router.query.keyword]);\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, filters.filter(v => v.text).map(v => __jsx(FilterWrapper, {\n    key: v.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, v.text, __jsx(\"span\", {\n    \"aria-hidden\": \"true\",\n    style: {\n      marginLeft: 10,\n      cursor: \"pointer\"\n    },\n    onClick: () => handleRemove(v.text),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \"\\xD7\"))));\n};\n\nexport default SearchTag;","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/components/search/SearchTag.tsx"],"names":["useRouter","React","useState","useCallback","useEffect","styled","searchOptions","Container","div","FilterWrapper","span","props","theme","whiteBox","sortAndFilter","sort","concat","filter","setTag","keyword","map","v","splitQuery","split","query","value","text","v2","SearchTag","router","filters","setFilters","handleRemove","nextFilters","find","url","forEach","push","marginLeft","cursor"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\n\nconst Container = styled.div`\n  width: 100%;\n  margin: 0 auto;\n  margin-top: 10px;\n  margin-bottom: 20px;\n`;\n\nconst FilterWrapper = styled.span`\n  ${props => props.theme.whiteBox};\n  display: inline-block;\n  padding: 10px;\n\n  & + & {\n    margin-left: 10px;\n  }\n`;\n\nconst sortAndFilter = searchOptions.sort.concat(searchOptions.filter);\n\nconst setTag = (keyword: any) =>\n  keyword.map(v => {\n    const splitQuery = v.split(\"=\");\n    return {\n      query: splitQuery[0],\n      value: splitQuery[1],\n      text:\n        splitQuery[0] !== \"searchKeyword\"\n          ? sortAndFilter.filter(v2 => v2.value === splitQuery[1])[0].text\n          : \"\"\n    };\n  });\n\nconst SearchTag = () => {\n  const router = useRouter();\n  const [filters, setFilters] = useState<any>(setTag(router.query.keyword));\n\n  const handleRemove = useCallback(\n    text => {\n      const nextFilters = filters.filter(v => v.text !== text);\n      setFilters(nextFilters);\n      const keyword = nextFilters.find(v => v.query === \"searchKeyword\");\n      const sort = nextFilters.find(v => v.query === \"orderBy\");\n      const filter = nextFilters.filter(v => v.query === \"filter\");\n\n      let url = `/search/searchKeyword=${keyword.value}`;\n      if (sort) {\n        url += `/orderBy=${sort.value}`;\n      }\n      filter.forEach(v => {\n        url += `/filter=${v.value}`;\n      });\n      router.push(url);\n    },\n    [filters, router.query]\n  );\n\n  useEffect(() => {\n    setFilters(setTag(router.query.keyword));\n  }, [router.query.keyword]);\n\n  return (\n    <Container>\n      {filters\n        .filter(v => v.text)\n        .map(v => (\n          <FilterWrapper key={v.value}>\n            {v.text}\n            <span\n              aria-hidden=\"true\"\n              style={{ marginLeft: 10, cursor: \"pointer\" }}\n              onClick={() => handleRemove(v.text)}\n            >\n              Ã—\n            </span>\n          </FilterWrapper>\n        ))}\n    </Container>\n  );\n};\n\nexport default SearchTag;\n"]},"metadata":{},"sourceType":"module"}