{"ast":null,"code":"var __jsx = React.createElement;\nimport Router from \"next/router\";\nimport React, { useCallback } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { useInput } from \"../../hooks\";\nimport { logInMutation } from \"../../graphql/auth/mutation/login\";\nimport SignInPresenter from \"./SignInPresenter\";\nimport { setAccessToken } from \"../../lib/token\";\n\nconst SignInContainer = () => {\n  const [login, {\n    loading\n  }] = useMutation(logInMutation);\n  const email = useInput(\"\");\n  const pwd = useInput(\"\");\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n    if (loading) return;\n\n    try {\n      await login({\n        variables: {\n          email: email.value,\n          pwd: pwd.value\n        },\n        update: (_, {\n          data\n        }) => {\n          if (data && data.logIn) {\n            setAccessToken(data.logIn);\n            Router.push(\"/\");\n          }\n        }\n      });\n    } catch (error) {\n      const {\n        message\n      } = JSON.parse(error.message);\n      alert(message);\n    }\n  }, [email.value, pwd.value, loading]);\n  return __jsx(SignInPresenter, {\n    loading: loading,\n    email: email,\n    pwd: pwd,\n    onSubmit: handleSubmit\n  });\n};\n\nexport default SignInContainer;","map":null,"metadata":{},"sourceType":"module"}