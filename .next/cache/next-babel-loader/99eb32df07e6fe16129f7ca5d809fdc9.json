{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/idonghun/Desktop/vss/frontend/components/search/SearchBar.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React, { useState, useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport Input from \"../common/Input\";\nimport Button from \"../common/Button\";\nimport { Label } from \"../common/Form\";\nimport { Search, Filter } from \"../icon\";\nimport searchOptions from \"./search_options.json\"; // import SearchResult from \"../common/SearchResult\";\n// import { useDebounce } from \"../../hooks\";\n\nvar SearchForm = styled.form.withConfig({\n  displayName: \"SearchBar__SearchForm\",\n  componentId: \"sc-118hiqe-0\"\n})([\"position:relative;margin:0 auto;width:100%;\"]);\n_c = SearchForm;\nvar Wrapper = styled.div.withConfig({\n  displayName: \"SearchBar__Wrapper\",\n  componentId: \"sc-118hiqe-1\"\n})([\"position:relative;display:flex;justify-content:space-between;\"]);\n_c2 = Wrapper;\nvar SearchInput = styled(Input).withConfig({\n  displayName: \"SearchBar__SearchInput\",\n  componentId: \"sc-118hiqe-2\"\n})([\"background:\", \";padding:5px;font-size:14px;border-radius:3px;text-align:center;position:relative;&::placeholder{opacity:0.8;font-weight:200;}\"], function (props) {\n  return props.theme.bgColor;\n});\n_c3 = SearchInput;\nvar IconWrapper = styled.div.withConfig({\n  displayName: \"SearchBar__IconWrapper\",\n  componentId: \"sc-118hiqe-3\"\n})([\"position:absolute;right:35px;top:5px;\"]);\n_c4 = IconWrapper;\nvar FilterWrapper = styled.div.withConfig({\n  displayName: \"SearchBar__FilterWrapper\",\n  componentId: \"sc-118hiqe-4\"\n})([\"\", \";margin-top:5px;width:100%;height:auto;display:\", \";flex-direction:column;\"], function (props) {\n  return props.theme.whiteBox;\n}, function (props) {\n  return props.activeFilter ? \"flex\" : \"none\";\n});\n_c5 = FilterWrapper;\nvar FilterColumn = styled.div.withConfig({\n  displayName: \"SearchBar__FilterColumn\",\n  componentId: \"sc-118hiqe-5\"\n})([\"display:flex;justfiy-content:flex-start;align-items:center;padding:10px;\"]);\n_c6 = FilterColumn;\nvar FilterCategory = styled.div.withConfig({\n  displayName: \"SearchBar__FilterCategory\",\n  componentId: \"sc-118hiqe-6\"\n})([\"font-size:20px;font-weight:500;text-align:center;padding:10px;\"]);\n_c7 = FilterCategory;\nvar FilterSelector = styled.div.withConfig({\n  displayName: \"SearchBar__FilterSelector\",\n  componentId: \"sc-118hiqe-7\"\n})([\"font-size:16px;padding:10px;flex:1;& input{margin-right:5px;}& span{margin-left:10px;}\"]);\n_c8 = FilterSelector;\n\nvar SearchBar = function SearchBar() {\n  _s();\n\n  var router = useRouter();\n  var keyword, orderBy;\n\n  if (router.query.keyword) {\n    keyword = router.query.keyword[0] || \"\";\n    orderBy = router.query.keyword[1] || \"\";\n  }\n\n  var _useState = useState(false),\n      activeFilter = _useState[0],\n      setActiveFilter = _useState[1];\n\n  var _useState2 = useState(orderBy || \"\"),\n      sort = _useState2[0],\n      setSort = _useState2[1];\n\n  var _useState3 = useState([]),\n      filters = _useState3[0],\n      setFilters = _useState3[1];\n\n  var _useState4 = useState(keyword || \"\"),\n      search = _useState4[0],\n      setSearch = _useState4[1]; // const [searchKeyword, setSearchKeyword] = useDebounce(\"\", 500);\n\n\n  var handleClickFilter = useCallback(function () {\n    setActiveFilter(!activeFilter);\n  }, [activeFilter]);\n  var handleChangeSort = useCallback(function (e) {\n    setSort(e.target.value);\n  }, []);\n  var handleChangeFilter = useCallback(function (e) {\n    var _e$target = e.target,\n        checked = _e$target.checked,\n        value = _e$target.value;\n\n    if (checked) {\n      setFilters(function (prev) {\n        return prev.concat(value);\n      });\n    } else {\n      setFilters(function (prev) {\n        return prev.filter(function (v) {\n          return v !== value;\n        });\n      });\n    }\n  }, []);\n  var handleChangeSearch = useCallback(function (e) {\n    setSearch(e.target.value); // setSearchKeyword(e.target.value);\n  }, []);\n  var handleSearchSubmit = useCallback(function (e) {\n    e.preventDefault();\n\n    if (!search) {\n      return alert(\"검색어를 입력하세요\");\n    }\n\n    setActiveFilter(false);\n    var url = \"/search\";\n\n    if (search) {\n      url += \"/keyword=\".concat(search);\n    }\n\n    if (sort) {\n      url += \"/sort=\".concat(sort);\n    }\n\n    if (filters.length > 0) {\n      url += \"/filter=\".concat(filters.join(\"/\"));\n    }\n\n    router.push(url);\n  }, [search, sort, filters]);\n  return __jsx(SearchForm, {\n    onSubmit: handleSearchSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, __jsx(Label, {\n    htmlFor: \"search\",\n    val: search,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, \"\\uAC80\\uC0C9\\uC5B4\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\"), __jsx(Wrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, __jsx(SearchInput, {\n    placeholder: \"\\uAC80\\uC0C9\\uC5B4\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\",\n    name: \"search\",\n    value: search,\n    onChange: handleChangeSearch,\n    autoComplete: \"off\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }), __jsx(IconWrapper, {\n    onClick: handleSearchSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, __jsx(Search, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    onClick: handleClickFilter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, __jsx(Filter, {\n    style: {\n      width: 30,\n      height: 30\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }))), __jsx(FilterWrapper, {\n    activeFilter: activeFilter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, __jsx(FilterColumn, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, __jsx(FilterCategory, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }, \"\\uC815\\uB82C\"), __jsx(FilterSelector, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, searchOptions.sort.map(function (v) {\n    return __jsx(\"span\", {\n      key: v.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }, __jsx(\"input\", {\n      type: \"radio\",\n      name: \"radio\",\n      id: v.id,\n      value: v.value,\n      onChange: handleChangeSort,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }), __jsx(\"label\", {\n      htmlFor: v.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, v.text));\n  }))), __jsx(FilterColumn, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, __jsx(FilterCategory, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, \"\\uC0C1\\uD0DC\"), __jsx(FilterSelector, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, searchOptions.filter.map(function (v) {\n    return __jsx(\"span\", {\n      key: v.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      name: \"checkbox\",\n      id: v.id,\n      value: v.value,\n      onChange: handleChangeFilter,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }), __jsx(\"label\", {\n      htmlFor: v.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, v.text));\n  }))), __jsx(FilterColumn, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    text: \"\\uC801\\uC6A9\",\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_s(SearchBar, \"XPhGXVbzKSAG+1mVbASZ3TZOsgM=\", false, function () {\n  return [useRouter];\n});\n\n_c9 = SearchBar;\nexport default SearchBar;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n\n$RefreshReg$(_c, \"SearchForm\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"SearchInput\");\n$RefreshReg$(_c4, \"IconWrapper\");\n$RefreshReg$(_c5, \"FilterWrapper\");\n$RefreshReg$(_c6, \"FilterColumn\");\n$RefreshReg$(_c7, \"FilterCategory\");\n$RefreshReg$(_c8, \"FilterSelector\");\n$RefreshReg$(_c9, \"SearchBar\");","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/components/search/SearchBar.tsx"],"names":["useRouter","React","useState","useCallback","styled","Input","Button","Label","Search","Filter","searchOptions","SearchForm","form","Wrapper","div","SearchInput","props","theme","bgColor","IconWrapper","FilterWrapper","whiteBox","activeFilter","FilterColumn","FilterCategory","FilterSelector","SearchBar","router","keyword","orderBy","query","setActiveFilter","sort","setSort","filters","setFilters","search","setSearch","handleClickFilter","handleChangeSort","e","target","value","handleChangeFilter","checked","prev","concat","filter","v","handleChangeSearch","handleSearchSubmit","preventDefault","alert","url","length","join","push","width","height","map","id","text"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport React, { useState, useCallback, ChangeEvent, FormEvent } from \"react\";\nimport styled from \"styled-components\";\nimport Input from \"../common/Input\";\nimport Button from \"../common/Button\";\nimport { Label } from \"../common/Form\";\nimport { Search, Filter } from \"../icon\";\nimport searchOptions from \"./search_options.json\";\n// import SearchResult from \"../common/SearchResult\";\n// import { useDebounce } from \"../../hooks\";\n\nconst SearchForm = styled.form`\n  position: relative;\n  margin: 0 auto;\n  width: 100%;\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst SearchInput = styled(Input)`\n  background: ${props => props.theme.bgColor};\n  padding: 5px;\n  font-size: 14px;\n  border-radius: 3px;\n  text-align: center;\n  position: relative;\n\n  &::placeholder {\n    opacity: 0.8;\n    font-weight: 200;\n  }\n`;\n\nconst IconWrapper = styled.div`\n  position: absolute;\n  right: 35px;\n  top: 5px;\n`;\n\nconst FilterWrapper = styled.div<{ activeFilter: boolean }>`\n  ${props => props.theme.whiteBox};\n  margin-top: 5px;\n  width: 100%;\n  height: auto;\n  display: ${props => (props.activeFilter ? \"flex\" : \"none\")};\n  flex-direction: column;\n`;\n\nconst FilterColumn = styled.div`\n  display: flex;\n  justfiy-content: flex-start;\n  align-items: center;\n  padding: 10px;\n`;\n\nconst FilterCategory = styled.div`\n  font-size: 20px;\n  font-weight: 500;\n  text-align: center;\n  padding: 10px;\n`;\n\nconst FilterSelector = styled.div`\n  font-size: 16px;\n  padding: 10px;\n  flex: 1;\n\n  & input {\n    margin-right: 5px;\n  }\n\n  & span {\n    margin-left: 10px;\n  }\n`;\n\nconst SearchBar = () => {\n  const router = useRouter();\n  let keyword, orderBy;\n  if (router.query.keyword) {\n    keyword = router.query.keyword[0] || \"\";\n    orderBy = router.query.keyword[1] || \"\";\n  }\n  const [activeFilter, setActiveFilter] = useState<boolean>(false);\n  const [sort, setSort] = useState<string>(orderBy || \"\");\n  const [filters, setFilters] = useState<string[]>([]);\n  const [search, setSearch] = useState<string>(keyword || \"\");\n  // const [searchKeyword, setSearchKeyword] = useDebounce(\"\", 500);\n\n  const handleClickFilter = useCallback(() => {\n    setActiveFilter(!activeFilter);\n  }, [activeFilter]);\n\n  const handleChangeSort = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setSort(e.target.value);\n  }, []);\n\n  const handleChangeFilter = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    const { checked, value } = e.target;\n    if (checked) {\n      setFilters(prev => prev.concat(value));\n    } else {\n      setFilters(prev => prev.filter(v => v !== value));\n    }\n  }, []);\n\n  const handleChangeSearch = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setSearch(e.target.value);\n    // setSearchKeyword(e.target.value);\n  }, []);\n\n  const handleSearchSubmit = useCallback(\n    (e: FormEvent<any>) => {\n      e.preventDefault();\n      if (!search) {\n        return alert(\"검색어를 입력하세요\");\n      }\n      setActiveFilter(false);\n\n      let url = \"/search\";\n      if (search) {\n        url += `/keyword=${search}`;\n      }\n      if (sort) {\n        url += `/sort=${sort}`;\n      }\n      if (filters.length > 0) {\n        url += `/filter=${filters.join(\"/\")}`;\n      }\n      router.push(url);\n    },\n    [search, sort, filters]\n  );\n  return (\n    <SearchForm onSubmit={handleSearchSubmit}>\n      <Label htmlFor=\"search\" val={search}>\n        검색어를 입력하세요.\n      </Label>\n      <Wrapper>\n        <SearchInput\n          placeholder=\"검색어를 입력하세요.\"\n          name=\"search\"\n          value={search}\n          onChange={handleChangeSearch}\n          autoComplete=\"off\"\n        />\n\n        <IconWrapper onClick={handleSearchSubmit}>\n          <Search />\n        </IconWrapper>\n        <div onClick={handleClickFilter}>\n          <Filter style={{ width: 30, height: 30 }} />\n        </div>\n      </Wrapper>\n      <FilterWrapper activeFilter={activeFilter}>\n        <FilterColumn>\n          <FilterCategory>정렬</FilterCategory>\n          <FilterSelector>\n            {searchOptions.sort.map(v => (\n              <span key={v.id}>\n                <input\n                  type=\"radio\"\n                  name=\"radio\"\n                  id={v.id}\n                  value={v.value}\n                  onChange={handleChangeSort}\n                />\n                <label htmlFor={v.id}>{v.text}</label>\n              </span>\n            ))}\n          </FilterSelector>\n        </FilterColumn>\n        <FilterColumn>\n          <FilterCategory>상태</FilterCategory>\n          <FilterSelector>\n            {searchOptions.filter.map(v => (\n              <span key={v.id}>\n                <input\n                  type=\"checkbox\"\n                  name=\"checkbox\"\n                  id={v.id}\n                  value={v.value}\n                  onChange={handleChangeFilter}\n                />\n                <label htmlFor={v.id}>{v.text}</label>\n              </span>\n            ))}\n          </FilterSelector>\n        </FilterColumn>\n        <FilterColumn>\n          <Button text=\"적용\" type=\"submit\" />\n        </FilterColumn>\n      </FilterWrapper>\n      {/* {searchKeyword && (\n        <SearchResult\n          searchKeyword={searchKeyword}\n          setSearch={setSearch}\n          setSearchKeyword={setSearchKeyword}\n        />\n      )} */}\n    </SearchForm>\n  );\n};\n\nexport default SearchBar;\n"]},"metadata":{},"sourceType":"module"}