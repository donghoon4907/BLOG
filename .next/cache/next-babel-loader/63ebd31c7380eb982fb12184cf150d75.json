{"ast":null,"code":"var _jsxFileName = \"/Users/idonghun/Desktop/vss/frontend/components/search/SearchTag.tsx\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\nconst Container = styled.div.withConfig({\n  displayName: \"SearchTag__Container\",\n  componentId: \"n6c13p-0\"\n})([\"width:100%;margin:0 auto;margin-top:10px;\"]);\nconst FilterWrapper = styled.span.withConfig({\n  displayName: \"SearchTag__FilterWrapper\",\n  componentId: \"n6c13p-1\"\n})([\"\", \";display:inline-block;padding:10px;& + &{margin-left:10px;}\"], props => props.theme.whiteBox);\n\nconst setTag = obj => Object.keys(obj).filter(v => obj[v] && v !== \"keyword\").reduce((acc, v) => {\n  if (v === \"filter\") {\n    const splitFilter = obj[v].split(\",\");\n    splitFilter.forEach(v2 => {\n      acc.push({\n        query: v,\n        value: v2,\n        text: searchOptions[v].filter(v3 => v3.value === v2)[0].text\n      });\n    });\n  } else {\n    acc.push({\n      query: v,\n      value: obj[v],\n      text: searchOptions[v].filter(v2 => v2.value === obj[v])[0].text\n    });\n  }\n\n  return acc;\n}, []);\n\nconst SearchTag = () => {\n  const router = useRouter();\n  const {\n    0: filters,\n    1: setFilters\n  } = useState(setTag(router.query));\n  const handleRemove = useCallback(text => {\n    const nextFilters = filters.filter(v => v.text !== text);\n    setFilters(nextFilters);\n    const keyword = router.query.keyword;\n    const sort = nextFilters.filter(v => v.query === \"sort\")[0];\n    const filter = nextFilters.filter(v => v.query !== \"sort\").map(v => v.value).join(\",\");\n    router.push(`/search?keyword=${keyword}&sort=${sort}&filter=${filter}`);\n  }, [filters, router.query]);\n  useEffect(() => {\n    setFilters(setTag(router.query));\n  }, [router.query]);\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, filters.map(v => __jsx(FilterWrapper, {\n    key: v.query,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, v.text, __jsx(\"span\", {\n    \"aria-hidden\": \"true\",\n    style: {\n      marginLeft: 10,\n      cursor: \"pointer\"\n    },\n    onClick: handleRemove,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, \"\\xD7\"))));\n};\n\nexport default SearchTag;","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/components/search/SearchTag.tsx"],"names":["useRouter","React","useState","useCallback","useEffect","styled","searchOptions","Container","div","FilterWrapper","span","props","theme","whiteBox","setTag","obj","Object","keys","filter","v","reduce","acc","splitFilter","split","forEach","v2","push","query","value","text","v3","SearchTag","router","filters","setFilters","handleRemove","nextFilters","keyword","sort","map","join","marginLeft","cursor"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\n\nconst Container = styled.div`\n  width: 100%;\n  margin: 0 auto;\n  margin-top: 10px;\n`;\n\nconst FilterWrapper = styled.span`\n  ${props => props.theme.whiteBox};\n  display: inline-block;\n  padding: 10px;\n\n  & + & {\n    margin-left: 10px;\n  }\n`;\n\nconst setTag = (obj: any) =>\n  Object.keys(obj)\n    .filter(v => obj[v] && v !== \"keyword\")\n    .reduce((acc, v) => {\n      if (v === \"filter\") {\n        const splitFilter = obj[v].split(\",\");\n        splitFilter.forEach(v2 => {\n          acc.push({\n            query: v,\n            value: v2,\n            text: searchOptions[v].filter(v3 => v3.value === v2)[0].text\n          });\n        });\n      } else {\n        acc.push({\n          query: v,\n          value: obj[v],\n          text: searchOptions[v].filter(v2 => v2.value === obj[v])[0].text\n        });\n      }\n      return acc;\n    }, [] as any);\n\nconst SearchTag = () => {\n  const router = useRouter();\n  const [filters, setFilters] = useState<any>(setTag(router.query));\n\n  const handleRemove = useCallback(\n    text => {\n      const nextFilters = filters.filter(v => v.text !== text);\n      setFilters(nextFilters);\n      const keyword = router.query.keyword;\n      const sort = nextFilters.filter(v => v.query === \"sort\")[0];\n      const filter = nextFilters\n        .filter(v => v.query !== \"sort\")\n        .map(v => v.value)\n        .join(\",\");\n      router.push(`/search?keyword=${keyword}&sort=${sort}&filter=${filter}`);\n    },\n    [filters, router.query]\n  );\n\n  useEffect(() => {\n    setFilters(setTag(router.query));\n  }, [router.query]);\n\n  return (\n    <Container>\n      {filters.map(v => (\n        <FilterWrapper key={v.query}>\n          {v.text}\n          <span\n            aria-hidden=\"true\"\n            style={{ marginLeft: 10, cursor: \"pointer\" }}\n            onClick={handleRemove}\n          >\n            Ã—\n          </span>\n        </FilterWrapper>\n      ))}\n    </Container>\n  );\n};\n\nexport default SearchTag;\n"]},"metadata":{},"sourceType":"module"}