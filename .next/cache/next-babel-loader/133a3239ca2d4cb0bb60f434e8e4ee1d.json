{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/idonghun/Desktop/vss/frontend/components/search/SearchTag.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\nvar Container = styled.div.withConfig({\n  displayName: \"SearchTag__Container\",\n  componentId: \"n6c13p-0\"\n})([\"width:100%;margin:0 auto;margin-top:10px;margin-bottom:20px;\"]);\n_c = Container;\nvar FilterWrapper = styled.span.withConfig({\n  displayName: \"SearchTag__FilterWrapper\",\n  componentId: \"n6c13p-1\"\n})([\"\", \";display:inline-block;padding:10px;& + &{margin-left:10px;}\"], function (props) {\n  return props.theme.whiteBox;\n});\n_c2 = FilterWrapper;\nvar sortAndFilter = searchOptions.sort.concat(searchOptions.filter);\nconsole.log(sortAndFilter);\n\nvar setTag = function setTag(keyword) {\n  return keyword.map(function (v) {\n    return {\n      value: v,\n      text: sortAndFilter.filter(function (v2) {\n        return v2.value === v;\n      })[0].text\n    };\n  }).reduce(function (acc, v, idx) {\n    if (v === \"filter\") {\n      var splitFilter = obj[v].split(\",\");\n      splitFilter.forEach(function (v2) {\n        acc.push({\n          query: v,\n          value: v2,\n          text: searchOptions[v].filter(function (v3) {\n            return v3.value === v2;\n          })[0].text\n        });\n      });\n    } else {\n      acc.push({\n        query: v,\n        value: obj[v],\n        text: searchOptions[v].filter(function (v2) {\n          return v2.value === obj[v];\n        })[0].text\n      });\n    }\n\n    return acc;\n  }, []);\n};\n\nvar SearchTag = function SearchTag() {\n  _s();\n\n  var router = useRouter();\n\n  var _useState = useState(setTag(router.query.keyword)),\n      filters = _useState[0],\n      setFilters = _useState[1];\n\n  var handleRemove = useCallback(function (text) {\n    var nextFilters = filters.filter(function (v) {\n      return v.text !== text;\n    });\n    var keyword = router.query.keyword;\n    var sort = \"\";\n    var findSort = nextFilters.filter(function (v) {\n      return v.query === \"sort\";\n    });\n\n    if (findSort.length > 0) {\n      sort = findSort[0].value;\n    }\n\n    var filter = nextFilters.filter(function (v) {\n      return v.query !== \"sort\";\n    }).map(function (v) {\n      return v.value;\n    }).join(\",\");\n    router.push(\"/search/\".concat(keyword, \"/\").concat(sort, \"/\").concat(filter));\n  }, [filters, router.query]);\n  useEffect(function () {\n    setFilters(setTag(router.query));\n  }, [router.query]);\n  return __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, filters.map(function (v) {\n    return __jsx(FilterWrapper, {\n      key: v.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, v.text, __jsx(\"span\", {\n      \"aria-hidden\": \"true\",\n      style: {\n        marginLeft: 10,\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        return handleRemove(v.text);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }, \"\\xD7\"));\n  }));\n};\n\n_s(SearchTag, \"H/W70xZC0+Lg/7RBXOKofzH0f28=\", false, function () {\n  return [useRouter];\n});\n\n_c3 = SearchTag;\nexport default SearchTag;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"FilterWrapper\");\n$RefreshReg$(_c3, \"SearchTag\");","map":{"version":3,"sources":["/Users/idonghun/Desktop/vss/frontend/components/search/SearchTag.tsx"],"names":["useRouter","React","useState","useCallback","useEffect","styled","searchOptions","Container","div","FilterWrapper","span","props","theme","whiteBox","sortAndFilter","sort","concat","filter","console","log","setTag","keyword","map","v","value","text","v2","reduce","acc","idx","splitFilter","obj","split","forEach","push","query","v3","SearchTag","router","filters","setFilters","handleRemove","nextFilters","findSort","length","join","marginLeft","cursor"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport searchOptions from \"./search_options.json\";\n\nconst Container = styled.div`\n  width: 100%;\n  margin: 0 auto;\n  margin-top: 10px;\n  margin-bottom: 20px;\n`;\n\nconst FilterWrapper = styled.span`\n  ${props => props.theme.whiteBox};\n  display: inline-block;\n  padding: 10px;\n\n  & + & {\n    margin-left: 10px;\n  }\n`;\n\nconst sortAndFilter = searchOptions.sort.concat(searchOptions.filter);\n\nconsole.log(sortAndFilter);\n\nconst setTag = (keyword: any) =>\n  keyword\n    .map(v => ({\n      value: v,\n      text: sortAndFilter.filter(v2 => v2.value === v)[0].text\n    }))\n\n    .reduce((acc, v, idx) => {\n      if (v === \"filter\") {\n        const splitFilter = obj[v].split(\",\");\n        splitFilter.forEach(v2 => {\n          acc.push({\n            query: v,\n            value: v2,\n            text: searchOptions[v].filter(v3 => v3.value === v2)[0].text\n          });\n        });\n      } else {\n        acc.push({\n          query: v,\n          value: obj[v],\n          text: searchOptions[v].filter(v2 => v2.value === obj[v])[0].text\n        });\n      }\n      return acc;\n    }, [] as any);\n\nconst SearchTag = () => {\n  const router = useRouter();\n  const [filters, setFilters] = useState<any>(setTag(router.query.keyword));\n\n  const handleRemove = useCallback(\n    text => {\n      const nextFilters = filters.filter(v => v.text !== text);\n      const keyword = router.query.keyword;\n      let sort = \"\";\n      const findSort = nextFilters.filter(v => v.query === \"sort\");\n      if (findSort.length > 0) {\n        sort = findSort[0].value;\n      }\n      const filter = nextFilters\n        .filter(v => v.query !== \"sort\")\n        .map(v => v.value)\n        .join(\",\");\n\n      router.push(`/search/${keyword}/${sort}/${filter}`);\n    },\n    [filters, router.query]\n  );\n\n  useEffect(() => {\n    setFilters(setTag(router.query));\n  }, [router.query]);\n\n  return (\n    <Container>\n      {filters.map(v => (\n        <FilterWrapper key={v.value}>\n          {v.text}\n          <span\n            aria-hidden=\"true\"\n            style={{ marginLeft: 10, cursor: \"pointer\" }}\n            onClick={() => handleRemove(v.text)}\n          >\n            ×\n          </span>\n        </FilterWrapper>\n      ))}\n    </Container>\n  );\n};\n\nexport default SearchTag;\n"]},"metadata":{},"sourceType":"module"}